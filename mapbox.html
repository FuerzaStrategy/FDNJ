<!DOCTYPE html>
	<html>
	<head>
	    <meta charset='utf-8' />
	    <title>GeoJSON Test</title>
	    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
	    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	    <script src='https://npmcdn.com/@turf/turf/turf.min.js'></script>
	    <script src="https://cdn.jsdelivr.net/npm/@turf/turf@5/turf.min.js"></script>
	    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v1.0.0/mapbox-gl.js'></script>
	    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v1.0.0/mapbox-gl.css' rel='stylesheet' />
	    <style>
	
	        :root {
	            --top-push: 50px;
	            --view-width: calc(50% - 10px);
	            --view-height: 500px;
	        }
	
	        body { 
	            margin: 0; 
	            padding: 0; 
	            font-family: Arial, 'sans-serif';
	            overflow-x: hidden;
		    background-image: url("./data/Background-tool.png");
		    background-repeat: no-repeat;
		    background-attachment: fixed;
		    background-position: center;
		    background-size: 100% 111%;
	        }
	
	        .map {
	            margin-top: 230px;
	            padding: 0;
	            width: var(--view-width);
	            height: var(--view-height);
	            display: inline-block;
	        }
	
	        #previous_header {
	            margin-top: 0;
	            margin-left: 5%;
	            display: inline-block;
	            float: left;
	            width: calc(var(--view-width) - 5%);
	            text-align: center;
	            font-weight: bold;
	            color: white;
	            line-height: 50px;
	            font-size: 24px;
	        }
	
	
	        #current_header {
	            margin-top: 0;
	            margin-right: 5%;
	            display: inline-block;
	            float: right;
	            width: calc(var(--view-width) - 5%);
	            text-align: center;
	            font-weight: bold;
	            color: white;
	            line-height: 50px;
	            font-size: 24px;
	        }
	
	        .form {
	            width: 90%;
	            margin-left: 5%;
	            margin-top: 15px;
	            margin-bottom: 15px;
			
	        }
	
	        .zipInput {
	            border: 0;
	            border-bottom: 1px solid black;
	            outline: 0;
	            width: 400px;
	            font-size: 18px;
	        }
	
	        .zipSubmit {
	            background: #87859f;
	            font-size: 15px;
	            color: white;
	            padding: 5px 10px 5px 10px;
	        }
	
	        .zipSubmit:hover {
	            cursor: pointer;
	            background: #7d7b94;
	        }
	
	        #errorMessage {
	            font-size: 18px;
	            padding-left: 5%;
	            margin-bottom: 15px;
	            line-height: 18px;
	            height:18px;
	            width:100%;
	        }
	
	        #map_curr {
	            float: right;
	        }
	
	        #map_prev {
	            float: left;
	        }
	
	        .maps {
	            width: 90%;
	            margin-left: 5%;
	        }
	
	        #previous_district_number {
	            display: inline-block;
	            width: 49%;
	            text-align: center;
	            margin-top: 0;
			
		    font-size: 22px;
	        }
	
	        #current_district_number {
	            display: inline-block;
	            width: 49%;
	            text-align: center;
	            margin-top: 0;
		    font-size: 22px;
	        }
	
	        .map_prev_info {
	            margin-left: 5%;
	            width: calc(var(--view-width) - 5%);
	            text-align: center;
	            float: left;
	            display: inline-block;
	            background: #384369;
	        }
	
	        .map_curr_info {
	            margin-right: 5%;
	            display: inline-block;
	            float: right;
	            width: calc(var(--view-width) - 5%);
	            text-align: center;
	            display: inline-block;
	            background: #fce2aa;
	        }
	
	        .info_title {
	            font-weight: bold;
	        }
                 
         #table_black {
             border-style: solid black; 
             background: black; 
             margin-left: 5%; 
             margin-right: 5%; 
             border-radius: 15px; 
             height: 380px; 
             padding: 10px;
             color: white;
         }
	
 	#table_black_Legislator {
             border-style: solid black; 
             background: black; 
             margin-left: -10%; 
	     margin-right: -10%;
	     border-radius: 15px;
             height: 240px; 
             padding-top: 0px;
	     padding-right: 50px;
	     padding-bottom: 50px;
	     padding-left: 50px;
             color: white;
         }
	        
         #table_white {
             border-style: solid white; 
             background: white; 
             margin-left: 5%; 
             margin-right: 5%; 
             border-radius: 15px; 
             height: 420px; 
             padding: 10px;
             color: black;
         }
         #table_gray {
            border-style:solid #c3c3c1; 
            background:#c3c3c1; 
            margin-left:5%; 
            margin-right:5%; 
            border-radius:15px; 
            height:500px; 
            padding:10px;'
         }    
         #newsearch {
            box-sizing: content-box; 
            position: relative;
            margin: auto;
            border-radius: 15px; 
            width: 50%;
            height: 50px;
            padding: 30px;
            border: 1px solid black;
            background: black;
            color: white;
        }
        #blue_top {
            border-style:solid #384369; 
            background:#384369;   
            height:70px; 
            padding:10px;
	    padding-top:0px;
            text-align: center;
            color: white;
            font: arial;
         }          
         #yellow_top {
            border-style:solid #fce2aa; 
            background:#fce2aa;   
            height:70px; 
            padding:10px;
            padding-top:0px;
            text-align: center;
            font: arial;
         }
          #blue_top_first {
            border-style:solid #384369; 
            background:#384369;   
            height:70px; 
            padding:10px;
            text-align: center;
            color: white;
            font: arial;
         }
	  #yellow_top_first {
            border-style:solid #fce2aa; 
            background:#fce2aa;   
            height:70px; 
            padding:10px;
            text-align: center;
            font: arial;
         }
	    </style>
	</head>
	<body>
	

	<div id='main_field'>
	    <form class='form' align="center" name="myform" action="javascript:handleIt(zip.value)">
         <div id="newsearch" align="center" style="color:#fce2aa;">View changes to your Legislative District         
	     
		<input class='zipInput' name="zip" id="zip" type="text" placeholder="Enter your address here" style="background-color:#c3c3c1;" required/>
	        <input class='zipSubmit' name="Submit"  type="submit" value="Search"/>
		
	    </form>
	    <div id='errorMessage'></div>
            <br>
            
            <div id='table_black_Legislator'>
	      <h2>Your Current District: <p id='current_district_number_top' style="display: inline-block;">##</p></h2>
	      <p style="font-size: 20px"><i>Your Current Legislators</i></p>
              <center>
              <table style='border: 1px solid white;border-collapse: collapse;width:100%; text-align:center;'>
	            <tr style='border: 1px solid white;'>
	            <td style='border: 1px solid white;'><p>Senator</p></td>
	            <td style='border: 1px solid white;'><p>Members of Assembly</p></td>
              </tr>
              <tr style='border: 1px solid white;'>
              <td style='border: 1px solid white;'><p id='senator_curr'></p></td>
	      <td style='border: 1px solid white;'><p id='member1_curr' style="float:left"> </p><p id='member2_curr' style="float:right"></p></td>
	     
              </tr>
              </table>
              </center>
             </div>
      </div>
		<br>
		<br>
		<br>

	    <div style='width: 100%; height: 50px;'></div>
	    <div class='maps'>
	        <div class='map' id='map_prev'><div id='blue_top_first'><h1>2001 –2010 District Map</h1><p id='previous_district_number'>  </p></div></div>
	        <div class='map' id='map_curr'><div id='yellow_top_first'><h1>2011 –2020 District Map</h1><p id='current_district_number'>  </p></div></div>
	    </div>
	    <div>
	        <div class='map_prev_info'>
			<div id='blue_top'><h1>2001 –2010 District Map</h1><p id='previous_district_number_bottom'>  </p></div>	
	            <p id='city_prev' style='border-style:solid #c3c3c1; background:#c3c3c1; margin-left:5%; margin-right:5%; border-radius:15px; height:20px; padding:10px;'><i>Your Town:</i></p>
      <p id='other_city_prev' style='border-style:solid #c3c3c1; background:#c3c3c1; margin-left:5%; margin-right:5%; border-radius:15px; height:500px; padding:10px;'><u><b>Other Towns in Your District</b></u></p><!--NEW-->
	            <!--<p class='info_title'>Voters</p>-->
           <div id='table_black'>
              <p style="margin-bottom:0px"><u><b>Town Demographics</b></u></p>
	      <p style="margin-top:0px;margin-bottom:0px"><font size="1.5">*based on 2000 Census</font size></p>
	      <p id='population_prev' style="margin-top:0px;margin-bottom:0px">Population: ##,###</p>
	      <p id='voters_prev' style="margin-top:0px">Registered Voters: ##,###</p>
	      <br><br>
              <center>
              <table style='border: 1px solid white;border-collapse: collapse;width:100%; text-align:center;'>
		       <!--<colgroup>
			    <col style="width: 33%" />
			    <col style="width: 33%" />
			    <col style="width: 33%" />
		       </colgroup>-->
              <tr style='border: 1px solid white;'>
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid white;'><p>White</p></td>
	            <td width="14.285714285714285714285714285714%" style='border: 1px solid white;'><p>Black or African American</p></td>
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid white;'><p>American Indian and Alaskan Native</p></td>
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid white;'><p>Asian</p></td>
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid white;'><p>Native Hawaiian and Other Pacific Islander</p></td>
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid white;'><p>Some Other Race</p></td>
	            <td width="14.285714285714285714285714285714%" style='border: 1px solid white;'><p>Hispanic or Latino</p></td>
              </tr>
              <tr style='border: 1px solid white;'>
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid white;'><p id='white_prev'>##%</p></td>
              	    <td width="14.285714285714285714285714285714%" style='border: 1px solid white;'><p id='african_prev'>##%</p></td>
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid white;'><p id='ai_prev'>##%</p></td>
	            <td width="14.285714285714285714285714285714%" style='border: 1px solid white;'><p id='asian_prev'>##%</p></td>
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid white;'><p id='haw_prev'>##%</p></td>
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid white;'><p id='other_prev'>##%</p></td>
	            <td width="14.285714285714285714285714285714%" style='border: 1px solid white;'><p id='hispanic_prev'>##%</p></td>
              </tr>
              </table>
              </center>
	      <p align="center";><font size="1.5">*Percentages do not add up to 100% since voters may identify in multiple groups.</font size></p>
           </div>
           <br>
          <div id='table_white'><!--NEW-->
              <p style="margin-bottom:0px"><u><b>District Demographics</b></u></p>
              <p id='population_prev_num' style="margin-top:0px;margin-bottom:0px">Total Population: ##,###</p>
	      <p id='voters_prev_num' style="margin-top:0px">Registered Voters: ##,###</p>
	      <p id='old_target' style="margin-bottom:0px">District Target Population: ##,###</p>
	      <P id='deviation_old' style="margin-top:0px; margin-bottom:0px">Deviation: ##,###</P>
	      <br><br><br>
              <center>
              <table style='border: 1px solid black;border-collapse: collapse;table-layout: auto;width:100%; text-align:center;'>
		       <!--<colgroup>
			    <col style="width: 33%" />
			    <col style="width: 33%" />
			    <col style="width: 33%" />
		       </colgroup>-->
              <tr style='border: 1px solid black;'>
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid black;'><p>White</p></td>
	            <td width="14.285714285714285714285714285714%" style='border: 1px solid black;'><p>Black or African American</p></td>
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid black;'><p>American Indian and Alaskan Native</p></td>
	            <td width="14.285714285714285714285714285714%" style='border: 1px solid black;'><p>Asian</p></td>
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid black;'><p>Native Hawaiian and Other Pacific Islander</p></td>
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid black;'><p>Some Other Race</p></td>
	            <td width="14.285714285714285714285714285714%" style='border: 1px solid black;'><p>Hispanic or Latino</p></td>
              </tr>
              <tr style='border: 1px solid black;'>
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid black;'><p id='white_num'>##%</p></td>
              	    <td width="14.285714285714285714285714285714%" style='border: 1px solid black;'><p id='african_num'>##%</p></td>
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid black;'><p id='ai_num'>##%</p></td>
	            <td width="14.285714285714285714285714285714%" style='border: 1px solid black;'><p id='asian_num'>##%</p></td>
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid black;'><p id='haw_num'>##%</p></td>
		    <td width="14.285714285714285714285714285714%"style='border: 1px solid black;'><p id='other_num'>##%</p></td>
	            <td width="14.285714285714285714285714285714%" style='border: 1px solid black;'><p id='hispanic_num'>##%</p></td>
              </tr>
              </table>
              </center>
	      <p align="center";><font size="1.5">*Percentages do not add up to 100% since voters may identify in multiple groups.</font size></p>
           </div>
	    <div>
            <!--<p style='border-style:solid white; background:#384369; margin-left:5%; margin-right:5%; border-radius:15px; height: 170px; padding:10px;'></p>-->
            </div>
           <br>
	   <!--<div id='table_black'>
              <p id='voters_prev'>###,### Registered Voters (Town)</p>
              <center>
              <table style='border: 1px solid white;border-collapse: collapse;width:100%; text-align:center;'>
	            <tr style='border: 1px solid white;'>
              <td style='border: 1px solid white;'><p>Democratics</p></td>
	            <td style='border: 1px solid white;'><p>Republicans</p></td>
              </tr>
              <tr style='border: 1px solid white;'>
              <td style='border: 1px solid white;'><p id='democratic_prev'>###,###</p></td>
	            <td style='border: 1px solid white;'><p id='republican_prev'>###,###</p></td>
              </tr>
              </table>
              </center>
           </div>
           <br>
           <div id='table_white'>
              <p id='voters_prev_num'>###,### Registered Voters (District)</p>
              <center>
              <table style='border: 1px solid black;border-collapse: collapse;width:100%; text-align:center;'>
	            <tr style='border: 1px solid black;'>
              <td style='border: 1px solid black;'><p>Democratics</p></td>
	            <td style='border: 1px solid black;'><p>Republicans</p></td>
              </tr>
              <tr style='border: 1px solid black;'>
              <td style='border: 1px solid black;'><p id='democratic_num'>###,###</p></td>
	            <td style='border: 1px solid black;'><p id='republican_num'>###,###</p></td>
              </tr>
              </table>
              </center>
           </div>-->
           <br>
	            <!--<p class='info_title'>Fiscal</p>
	            <p id='taxable_prev'>Per Capital Taxable Property Value:</p>-->
	      </div>
	      <div class='map_curr_info'>
	      <div id='yellow_top'><h1>2011 –2020 District Map</h1><p id='current_district_number_bottom'>  </p></div>
	      <p id='city_curr'style='border-style:solid #c3c3c1; background:#c3c3c1; margin-left:5%; margin-right:5%; border-radius:15px; height:20px; padding:10px;'><i>Your Town:</i></p>
              <div id='table_gray'><!--NEW-->
              <!--<center>--> 
	      <p id='other_city_curr' style="margin-top:0px"><u><b>Other Towns in Your District</b></u></p><br>
		      
              <table style='border-right: 1px solid black;border: 1px solid #c3c3c1;border-collapse: collapse;width:100%; text-align:center;'>
              <tr>
	      <td style='width:50%'><i>Towns Added</i></td>
	      <td><i>Towns Removed</i></td>
              </tr>
              </table>
	      <table style='border: 1px solid #c3c3c1;border-collapse: collapse;width:100%; text-align:center;'>
              <tr>
              <td id="added" style='width:50%;border-right: 1px solid black;color:green'><br></td>
              <td id="removed" style='color:red'></td>
              </tr>
              </table>
              <!--</center>-->
             </div>
              <br>
	            <!--<p class='info_title'>Voters</p>-->
	            <!--<p class='info_title'>Census</p>-->
             <div id='table_black'>
		    <p style="margin-bottom:0px"><u><b>Town Demographics</b></u></p>
		    <p style="margin-top:0px;margin-bottom:0px"><font size="1.5">*based on 2010 Census</font size></p>
	            <p id='population_curr' style="margin-top:0px;margin-bottom:0px">Population: ##,###</p>
		    <p id='voters_curr' style="margin-top:0px;margin-bottom:0px">Registered Voters: ##,###</p><br>
		    <p id='estimate_pop_curr' style="margin-top:0px">Estimated Population(2018): ##,###</P>
              <center>
              <table style='border: 1px solid white;border-collapse: collapse;width:100%; text-align:center;'>
		      <!--<colgroup>
			    <col style="width: 33%" />
			    <col style="width: 33%" />
			    <col style="width: 33%" />
		       </colgroup>-->
              <tr style='border: 1px solid white;'>
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid white;'><p>White</p></td>
	            <td width="14.285714285714285714285714285714%" style='border: 1px solid white;'><p>Black or African American</p></td>
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid white;'><p>American Indian and Alaskan Native</p></td>
	            <td width="14.285714285714285714285714285714%" style='border: 1px solid white;'><p>Asian</p></td>
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid white;'><p>Native Hawaiian and Other Pacific Islander</p></td>
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid white;'><p>Some Other Race</p></td>
	            <td width="14.285714285714285714285714285714%" style='border: 1px solid white;'><p>Hispanic or Latino</p></td>
              </tr>
              <tr style='border: 1px solid white;'>
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid white;'><p id='white_curr'>##%</p></td>
	            <td width="14.285714285714285714285714285714%" style='border: 1px solid white;'><p id='african_curr'>##%</p></td>
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid white;'><p id='ai_curr'>##%</p></td>
	            <td width="14.285714285714285714285714285714%" style='border: 1px solid white;'><p id='asian_curr'>##%</p></td>
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid white;'><p id='haw_curr'>##%</p></td>
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid white;'><p id='other_curr'>##%</p></td>
	            <td width="14.285714285714285714285714285714%" style='border: 1px solid white;'><p id='hispanic_curr'>##%</p></td>
	            </tr>
              </table>
              </center>
	      <p align="center";><font size="1.5">*Percentages do not add up to 100% since voters may identify in multiple groups.</font size></p>
              </div>
              <br>
              <div id='table_white'><!--NEW-->
		    <p style="margin-bottom:0px"><u><b>District Demographics</b></u></p>
	            <p id='population_curr_num' style="margin-top:0px;margin-bottom:0px">Total Population: ##,###</p>
		    <p id='voters_curr_num' style="margin-top:0px;margin-bottom:0px">Registered Voters: ##,###</p><br>  
		    <p id='district_estimate_pop_curr' style="margin-top:0px;">Estimated Total Population (2018): ##,###</p>
		    <p id='new_target' style="margin-top:0px; margin-bottom:0px">District Target Population: ##,###</p>
		    <P id='deviation_curr_num' style="margin-top:0px">Deviation: ##,###</P>
              <center>
              <table style='border: 1px solid black;border-collapse: collapse; text-align:center;table-layout: auto;width: 100%;'>
		       <!--<colgroup>
			    <col style="width: 33%" />
			    <col style="width: 33%" />
			    <col style="width: 33%" />
		       </colgroup>-->
              <tr>
		    <!--<td style='border: 1px solid black;'><p>Deviation</p></td>-->
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid black;'><p>White</p></td>
	            <td width="14.285714285714285714285714285714%" style='border: 1px solid black;'><p>Black or African American</p></td>
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid black;'><p>American Indian and Alaskan Native</p></td>
	            <td width="14.285714285714285714285714285714%" style='border: 1px solid black;'><p>Asian</p></td>
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid black;'><p>Native Hawaiian and Other Pacific Islander</p></td>
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid black;'><p>Some Other Race</p></td>
	            <td width="14.285714285714285714285714285714%" style='border: 1px solid black;'><p>Hispanic or Latino</p></td>
              </tr>
              <tr>
		    <!--<td style='border: 1px solid black;'><p id='deviation_curr_num'>##</p></td>-->
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid black;'><p id='white_curr_num'>##%</p></td>
	            <td width="14.285714285714285714285714285714%" style='border: 1px solid black;'><p id='african_curr_num'>##%</p></td>
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid black;'><p id='ai_curr_num'>##%</p></td>
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid black;'><p id='asian_curr_num'>##%</p></td>
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid black;'><p id='haw_curr_num'>##%</p></td>
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid black;'><p id='other_curr_num'>##%</p></td>
	            <td width="14.285714285714285714285714285714%" style='border: 1px solid black;'><p id='hispanic_curr_num'>##%</p></td>
	            </tr>
              </table>
              </center>
	      <p align="center";><font size="1.5">*Percentages do not add up to 100% since voters may identify in multiple groups.</font size></p>
              </div>
              <br>
	      <!--<div id='table_black_Legislator'>
	      <p>Your Current Legislators</p>
              <center>
              <table style='border: 1px solid white;border-collapse: collapse;width:100%; text-align:center;'>
	            <tr style='border: 1px solid white;'>
	            <td style='border: 1px solid white;'><p>Senator</p></td>
	            <td style='border: 1px solid white;'><p>Members of Assembly</p></td>
              </tr>
              <tr style='border: 1px solid white;'>
              <td style='border: 1px solid white;'><p id='senator_curr'></p></td>
	      <td style='border: 1px solid white;'><p id='member1_curr' style="float:left"> </p><p id='member2_curr' style="float:right"></p></td>
	     
              </tr>
              </table>
              </center>
             </div>-->
	      <!--<div id='table_black'>
	            <p id='voters_curr'>###,### Registered Voters (Town)</p>
              <center>
              <table style='border: 1px solid white;border-collapse: collapse;width:100%; text-align:center;'>
	            <tr style='border: 1px solid white;'>
	            <td style='border: 1px solid white;'><p>Democratics</p></td>
	            <td style='border: 1px solid white;'><p>Republicans</p></td>
              </tr>
              <tr style='border: 1px solid white;'>
              <td style='border: 1px solid white;'><p id='democratic_curr'>###,###</p></td>
	            <td style='border: 1px solid white;'><p id='republican_curr'>###,###</p></td>
              </tr>
              </table>
              </center>
             </div>
             <br>
             <div id='table_white'>
	            <p id='voters_curr_num'>###,### Registered Voters (District)</p>
              <center>
              <table style='border: 1px solid black;border-collapse: collapse;width:100%; text-align:center;'>
	            <tr style='border: 1px solid black;'>
	            <td style='border: 1px solid black;'><p>Democratics</p></td>
	            <td style='border: 1px solid black;'><p>Republicans</p></td>
              </tr>
              <tr style='border: 1px solid black;'>
              <td style='border: 1px solid black;'><p id='democratic_curr_num'>###,###</p></td>
	            <td style='border: 1px solid black;'><p id='republican_curr_num'>###,###</p></td>
              </tr>
              </table>
              </center>
             </div>-->
             <br>
              <!--<p class='info_title'>Fiscal</p>
	            <p id='taxable_curr'>Per Capital Taxable Property Value:</p>-->
	        </div>
	    </div>		
</div>
	

	

	<script>

	    var municipality_file = {}
	    var numberOfTowns = 565;
	    var polygons_old_TRY = Array(numberOfTowns).fill(0)
	    var polygons_new_TRY = Array(numberOfTowns).fill(0)
	    var ZtC = {}
	    var ZtName = {}
	    var data_2000 = {}
	    var data_2010 = {}
	    var NJ_Zip = []
	    var LegislativeDataCurrent = {}
	    var LegislativeDataPast = {}
	    var Current_Legislators = {}
	    var old_n = 40;
	    var new_n = 40;
	    var LegislativeDataPast_Districts = {}
	    var LegislativeDataCurrent_Districts = {}
	    var currentHighlight_old = 0
	    var currentHighlight_new = 0
	    var polygons_old = Array(old_n).fill(0)
	    var polygons_new = Array(new_n).fill(0)
	    var racedata2000 = {}
	    var racedata2010 = {}
	    var currCountyData = {}
	    var AllData = {}
	    var new_district_data = {}
	    var distict_new_files = {}
	    var distict_old_files = {}
	    var District_Population_2010 = {}
	    
	    var currGloucesterData = {}
	    var currAtlanticData = {}
	    var currBergenData = {}
	    var currBurlingtonData = {}
	    var currCamdenData = {}
	    var currCapeMayData = {}
	    var currCumberlandData = {}
	    var currEssexData = {}
	    var currHudsonData = {}
	    var currMercerData = {}
	    var currMiddlesexData = {}
	    var currMonmouthData = {}
	    var currMorrisData = {}
	    var currOceanData = {}
	    var currPassaicData = {}
	    var currSalemData = {}
	    var currSomersetData = {}
	    var currSussexData = {}
	    var currUnionData = {}
	    var currWarrenData = {}
	    
	    var oldAtlanticData = {}
	    var oldBergenData = {}
	    var oldBurlingtonData = {}
	    var oldCamdenData = {}
	    var oldCapeMayData = {}
	    var oldCumberlandData = {}
	    var oldEssexData = {}
	    var oldGloucesterData = {}
	    var oldHudsonData = {}
	    var oldMercerData = {}
	    var oldMiddlesexData = {}
	    var oldMonmouthData = {}
	    var oldMorrisData = {}
	    var oldOceanData = {}
	    var oldPassaicData = {}
	    var oldSalemData = {}
	    var oldSomersetData = {}
	    var oldSussexData = {}
	    var oldUnionData = {}
	    var oldWarrenData = {}
	    
	    $.getJSON("data/NJ_Municipalities.geojson", function(data) {
	        municipality_file = data
	    })
	
	    $.getJSON("data/zip_to_coordinate.json", function(data) {
	        ZtC = data
	    })
	
	    $.getJSON("data/nj_zip_codes_to_towns.json", function(data) {
	        ZtName = data
	    })
	
	    $.getJSON("data/2000_data.json", function(data) {
	        data_2010 = data
	    })
	
	    $.getJSON("data/2010_data.json", function(data) {
	        data_2000 = data
	    })
	
	    $.getJSON("data/nj_zip_codes.json", function(data) {
	        NJ_Zip = data["zips"]
	    })
	
	    $.getJSON("data/2010_data_districts.json", function(data) { 
		new_district_data = data
	    })
	    
	   $.getJSON("data/2000_data_districts.json", function(data) { 
		old_district_data = data
	    })
  	   $.getJSON("data/Current_Legislators.json", function(data) {
	        Current_Legislators = data
	    })
	   $.getJSON("data/race_data_2000.json", function(data) {
	        racedata2000 = data
	    })
	   $.getJSON("data/2010_race_data.json", function(data) {
	        racedata2010 = data
	    })
	   $.getJSON("data/district_new_files.json", function(data) {
	        district_new_files = data
	    })
	   $.getJSON("data/district_old_files.json", function(data) {
	        district_old_files = data
	    })
           $.getJSON("data/2010_District_Population.json", function(data) {
	        District_Population_2010 = data
	    })
	    
	 $.getJSON("data.json", function(data) {
	        AllData = data
	    })
	$.getJSON("data/Curr_County/Atlantic County.json", function(data) {
	        currAtlanticData = data
	    })
	$.getJSON("data/Curr_County/Bergen County.json", function(data) {
	        currBergenData = data
	    })
	$.getJSON("data/Curr_County/Burlington County.json", function(data) {
	        currBurlingtonData = data
	    })
	$.getJSON("data/Curr_County/Camden County.json", function(data) {
	        currCamdenData = data
	    })
	$.getJSON("data/Curr_County/Cape May County.json", function(data) {
	        currCapeMayData = data
	    })
	$.getJSON("data/Curr_County/Cumberland County.json", function(data) {
	        currCumberlandData = data
	    })
	$.getJSON("data/Curr_County/Essex County.json", function(data) {
	        currEssexData = data
	    })
	$.getJSON("data/Curr_County/Gloucester County.json", function(data) {
	        currGloucesterData = data
	    })
	$.getJSON("data/Curr_County/Hudson County.json", function(data) {
	        currHudsonData = data
	    })
	$.getJSON("data/Curr_County/Hunterdon County.json", function(data) {
	        currHunterdonData = data
	    })
	$.getJSON("data/Curr_County/Mercer County.json", function(data) {
	        currMercerData = data
	    })
	$.getJSON("data/Curr_County/Middlesex County.json", function(data) {
	        currMiddlesexData = data
	    })
	$.getJSON("data/Curr_County/Monmouth County.json", function(data) {
	        currMonmouthData = data
	    })
	$.getJSON("data/Curr_County/Morris County.json", function(data) {
	        currMorrisData = data
	    })
	$.getJSON("data/Curr_County/Ocean County.json", function(data) {
	        currOceanData = data
	    })
	$.getJSON("data/Curr_County/Passaic County.json", function(data) {
	        currPassaicData = data
	    })
	$.getJSON("data/Curr_County/Salem County.json", function(data) {
	        currSalemData = data
	    })
	$.getJSON("data/Curr_County/Somerset County.json", function(data) {
	        currSomersetData = data
	    })
	$.getJSON("data/Curr_County/Sussex County.json", function(data) {
	        currSussexData = data
	    })
	$.getJSON("data/Curr_County/Union County.json", function(data) {
	        currUnionData = data
	    })
	$.getJSON("data/Curr_County/Warren County.json", function(data) {
	        currWarrenData = data
	    })
			    
		
		
	$.getJSON("data/old_County/Atlantic County.json", function(data) {
	        oldAtlanticData = data
	    })
	$.getJSON("data/old_County/Bergen County.json", function(data) {
	        oldBergenData = data
	    })
	$.getJSON("data/old_County/Burlington County.json", function(data) {
	        oldBurlingtonData = data
	    })
	$.getJSON("data/old_County/Camden County.json", function(data) {
	        oldCamdenData = data
	    })
	$.getJSON("data/old_County/Cape May County.json", function(data) {
	        oldCapeMayData = data
	    })
	$.getJSON("data/old_County/Cumberland County.json", function(data) {
	        oldCumberlandData = data
	    })
	$.getJSON("data/old_County/Essex County.json", function(data) {
	        oldEssexData = data
	    })
	$.getJSON("data/old_County/Gloucester County.json", function(data) {
	        oldGloucesterData = data
	    })
	$.getJSON("data/old_County/Hudson County.json", function(data) {
	        oldHudsonData = data
	    })
	$.getJSON("data/old_County/Hunterdon County.json", function(data) {
	        oldHunterdonData = data
	    })
	$.getJSON("data/old_County/Mercer County.json", function(data) {
	        oldMercerData = data
	    })
	$.getJSON("data/old_County/Middlesex County.json", function(data) {
	        oldMiddlesexData = data
	    })
	$.getJSON("data/old_County/Monmouth County.json", function(data) {
	        oldMonmouthData = data
	    })
	$.getJSON("data/old_County/Morris County.json", function(data) {
	        oldMorrisData = data
	    })
	$.getJSON("data/old_County/Ocean County.json", function(data) {
	        oldOceanData = data
	    })
	$.getJSON("data/old_County/Passaic County.json", function(data) {
	        oldPassaicData = data
	    })
	$.getJSON("data/old_County/Salem County.json", function(data) {
	        oldSalemData = data
	    })
	$.getJSON("data/old_County/Somerset County.json", function(data) {
	        oldSomersetData = data
	    })
	$.getJSON("data/old_County/Sussex County.json", function(data) {
	        oldSussexData = data
	    })
	$.getJSON("data/old_County/Union County.json", function(data) {
	        oldUnionData = data
	    })
	$.getJSON("data/old_County/Warren County.json", function(data) {
	        oldWarrenData = data
	    })
		
	    function handleIt(zip) {
	
	        const Http = new XMLHttpRequest();
	        var replaced_zip = zip.split(' ').join('+');
	        var url='https://maps.googleapis.com/maps/api/geocode/json?address=' + replaced_zip + '&key=AIzaSyB-OrotjsC4Vwn-WVfJD7JeeVbMS1eyKOE';
	        Http.open("GET", url);
	        Http.send();
		console.log(url)
	        //Http.onreadystatechange = (e) => {
	            Http.onreadystatechange = function(){ 
			  if (this.readyState == 4 && this.status == 200) {
		    var data = JSON.parse(this.responseText)
		    }
	
	            if(data.results[0] === undefined) {
	
	                $("#errorMessage").text("Please Enter a Valid Address in New Jersey");
	            }
	
	            else {
	                var lat = parseFloat(data.results[0].geometry.location.lat)
	                var lon = parseFloat(data.results[0].geometry.location.lng)
			var address_components = data.results[0].address_components
			for(var i = 0; i < address_components.length; i ++) {
		             var Countystr1 = address_components[i].long_name
			     if(Countystr1.match(/County/)=='County'){
				var County = Countystr1
				}
			}
			/*var Countystr3 =data.results[0].address_components[3].long_name;
			var Countystr4 =data.results[0].address_components[4].long_name;
			if(Countystr3.match(/County/)=='County'){
				var County = Countystr3
			}
			if(Countystr4.match(/County/)=='County'){
				var County = Countystr4
			}*/
		    
			console.log(County)
			
			
			    
	                var townName;
	                var data_from_2000;
	                var data_from_2010;
	                //var address_components = data.results[0].address_components
	                for(var i = 0; i < address_components.length; i ++) {
	                    var townName_temp = address_components[i].long_name
	                    if(data_2000[townName_temp] !== undefined) {
	                        townName = townName_temp
	                        data_from_2000 = data_2000[townName]
	                        data_from_2010 = data_2010[townName]
	                    }
			    //townName = townName_temp
	                }

			
			    
			console.log(townName)
			if(County == "Atlantic County"){
	                countyDataCurr = (currAtlanticData[townName])
			countyDataOld = (oldAtlanticData[townName])
		    	}    
			if(County == "Bergen County"){
	                countyDataCurr = (currBergenData[townName])
			countyDataOld = (oldBergenData[townName])
		    	}
			if(County == "Burlington County"){
	                countyDataCurr = (currBurlingtonData[townName])
			countyDataOld = (oldBurlingtonData[townName])
		    	}
			if(County == "Camden County"){
	                countyDataCurr = (currCamdenData[townName])
			countyDataOld = (oldCamdenData[townName])
		    	}
			if(County == "Cape May County"){
	                countyDataCurr = (currCapeMayData[townName])
			countyDataOld = (oldCapeMayData[townName])	
		    	}
			if(County == "Cumberland County"){
	                countyDataCurr = (currCumberlandData[townName])
			countyDataOld = (oldCumberlandData[townName])
		    	}
			if(County == "Essex County"){
	                countyDataCurr = (currEssexData[townName])
			countyDataOld = (oldEssexData[townName])
		    	}
			if(County == "Gloucester County"){
	                //countyDataCurr = (currHudsonData['JerseyCity'])
			countyDataCurr = (currGloucesterData[townName])
			countyDataOld = (oldGloucesterData[townName])
		    	}
			if(County == "Hudson County"){
	                countyDataCurr = (currHudsonData[townName])
			countyDataOld = (oldHudsonData[townName])
		    	}
			if(County == "Hunterdon County"){
	                countyDataCurr = (currHunterdonData[townName])
			countyDataOld = (oldHunterdonData[townName])
		    	}
			if(County == "Mercer County"){
	                countyDataCurr = (currMercerData[townName])
			countyDataOld = (oldMercerData[townName])
		    	}
			if(County == "Middlesex County"){
	                countyDataCurr = (currMiddlesexData[townName])
			countyDataOld = (oldMiddlesexData[townName])
		    	}
			if(County == "Monmouth County"){
	                countyDataCurr = (currMonmouthData[townName])
			countyDataOld = (oldMonmouthData[townName])
		    	}
			if(County == "Morris County"){
	                countyDataCurr = (currMorrisData[townName])
			countyDataOld = (oldMorrisData[townName])
		    	}
			if(County == "Ocean County"){
	                countyDataCurr = (currOceanData[townName])
			countyDataOld = (oldOceanData[townName])
		    	}
			if(County == "Passaic County"){
	                countyDataCurr = (currPassaicData[townName])
			countyDataOld = (oldPassaicData[townName])
		    	}
			if(County == "Salem County"){
	                countyDataCurr = (currSalemData[townName])
			countyDataOld = (oldSalemData[townName])
		    	}
			if(County == "Somerset County"){
	                countyDataCurr = (currSomersetData[townName])
			countyDataOld = (oldSomersetData[townName])
		    	}
			if(County == "Sussex County"){
	                countyDataCurr = (currSussexData[townName])
			countyDataOld = (oldSussexData[townName])
		    	}
			if(County == "Union County"){
	                countyDataCurr = (currUnionData[townName])
			countyDataOld = (oldUnionData[townName])
		    	}
			if(County == "Warren County"){
	                countyDataCurr = (currWarrenData[townName])
			countyDataOld = (oldWarrenData[townName])
		    	}
			
			    console.log(countyDataCurr)
			    console.log(countyDataOld)
			    
	                map_origin = [lon, lat]
	
	                map_prev.flyTo({
	                    center: map_origin,
	                    zoom: map_scale
	                });
	
	                map_curr.flyTo({
	                    center: map_origin,
	                    zoom: map_scale
	                });
	
	                var relatedFeatures = map_prev.querySourceFeatures('route', {
	                    sourceLayer: 'route-layer',
	                    filter: ["==", 'type', 'Feature']
	                });
	
	                var point = turf.point([lon, lat]);
	                var old_index = 0;
	                for(var i = 1; i <= old_n; i++) {
	                    if(polygons_old[i] != 0) {
	                        for(var k = 0; k < polygons_old[i].length; k++) {
	                            var test = turf.inside(point, polygons_old[i][k]);
	                            if(test)
	                                old_index = i
	                        }
	                    }
	                }
			    //console.log(polygons_new)
	                var new_index = 0;
	                for(var i = 1; i <= new_n; i++) {
	                    if(polygons_new[i] != 0) {
	                        for(var l = 0; l < polygons_new[i].length; l++) {
	                            var test = turf.inside(point, polygons_new[i][l]);
	                            if(test)
	                                new_index = i
	                        }
	                    }
	                }
			    


			    
			 if(County == "Morris County" && new_index==0){
			 	new_index=25;
			 }
			    
			////////////////////////////////////////////////
			   /* var townName1;
			    //var point2 = [lon, lat]
			    console.log(new_index)
			    var features_json = []; 
			    features_json = municipality_file.features; 
			    var jproperties = municipality_file.features.map(function (el) { return el.properties; });
			    
			    var County_lookup= County.replace(' County','').toUpperCase();
			    console.log(County_lookup)
			    //console.log(jproperties[0]["COUNTY"])
			    //console.log(point)
			    //console.log(municipality_file["features"][0]["geometry"]["coordinates"][0])
			    //console.log(TRY_polygons_new)
			    
			 for(var nx=0; nx < 565 ; nx++){
		  	 	if(jproperties[nx]["COUNTY"] == County_lookup){
					console.log("found county")
		    var coordinatesNewx = municipality_file["features"][nx]["geometry"]["coordinates"]
	            var polygons_groupx = []
	            
	            if(coordinatesNewx.length == 1) {
	                polygons_groupx.push( turf.polygon( coordinatesNewx, { name: 'poly1'} ))    
			//polygons_groupx.push(turf.lineToPolygon(turf.lineString(coordinatesNewx)));
	            }
	            else {
	                for(var lxxx = 0; lxxx < coordinatesNewx.length; lxxx++) {
	                    polygons_groupx.push( turf.polygon( coordinatesNewx[lxxx], { name: 'poly1'}) )
				//polygons_groupx.push(turf.lineToPolygon(turf.lineString(coordinatesNewx[lxxx])));
	                }
	              
	  		
	            }


				var txxx;
				for(var tx=0; tx < polygons_groupx.length; tx++){
				    if(turf.inside(point, polygons_groupx[tx])){
				    //if(turf.pointsWithinPolygon(point, polygons_groupx[tx])){
					   console.log("found coor!")
					    var txxx = 1;
					    //console.log(jproperties[nx]["MUN"])
					    townName1=jproperties[nx]["MUN_LABEL"];
					    break;
			}
					if(txxx==1){break;}
			    }
					
					
				}
			 /*}
			

			    //console.log(jproperties[564]["MUN"])
			    //console.log(townName1)
			    //console.log(municipality_file["features"][0]["geometry"]["coordinates"][0])
			    //console.log("hi")
			    //console.log(polygons_groupx)		    
			    
	
/*if( townName =='Aberdeen Township'){ townName = 'Aberdeen Township'}
else if( townName =='Absecon City'){ townName = 'Absecon'}
else if( townName =='Alexandria Township'){ townName = 'Alexandria'}
else if( townName =='Allamuchy Township'){ townName = 'Allamuchy Township'}
else if( townName =='Allendale Borough'){ townName = 'Allendale'}
else if( townName =='Allenhurst Borough'){ townName = 'Allenhurst'}
else if( townName =='Allentown Borough'){ townName = 'Allentown'}
else if( townName =='Alloway Township'){ townName = 'Alloway Township'}
else if( townName =='Alpha Borough'){ townName = 'Alpha'}
else if( townName =='Alpine Borough'){ townName = 'Alpine'}
else if( townName =='Andover Borough'){ townName = 'Andover'}
else if( townName =='Andover Township'){ townName = 'Andover Township'}
else if( townName =='Asbury Park City'){ townName = 'Asbury Park'}
else if( townName =='Atlantic City'){ townName = 'Atlantic City'}
else if( townName =='Atlantic Highlands Borough'){ townName = 'Atlantic Highlands'}
else if( townName =='Audubon Borough'){ townName = 'Audubon'}
else if( townName =='Audubon Park Borough'){ townName = 'Audubon Park'}
else if( townName =='Avalon Borough'){ townName = 'Avalon'}
else if( townName =='Avon-by-the-Sea Borough'){ townName = 'Avon By The Sea'}
else if( townName =='Barnegat Light Borough'){ townName = 'Barnegat Light'}
else if( townName =='Barnegat Township'){ townName = 'Barnegat Township'}
else if( townName =='Barrington Borough'){ townName = 'Barrington'}
else if( townName =='Bass River Township'){ townName = 'Bass River'}
else if( townName =='Bay Head Borough'){ townName = 'Bay Head'}
else if( townName =='Bayonne City'){ townName = 'Bayonne'}
else if( townName =='Beach Haven Borough'){ townName = 'Beach Haven'}
else if( townName =='Beachwood Borough'){ townName = 'Beachwood'}
else if( townName =='Bedminster Township'){ townName = 'Bedminster'}
else if( townName =='Belleville Township'){ townName = 'Belleville'}
else if( townName =='Bellmawr Borough'){ townName = 'Bellmawr'}
else if( townName =='Belmar Borough'){ townName = 'Belmar'}
else if( townName =='Belvidere Town'){ townName = 'Belvidere'}
else if( townName =='Bergenfield Borough'){ townName = 'Bergenfield'}
else if( townName =='Berkeley Heights Township'){ townName = 'Berkeley Heights'}
else if( townName =='Berkeley Township'){ townName = 'Berkeley Township'}
else if( townName =='Berlin Borough'){ townName = 'Berlin'}
else if( townName =='Berlin Township'){ townName = 'Berlin Township'}
else if( townName =='Bernards Township'){ townName = 'Bernards'}
else if( townName =='Bernardsville Borough'){ townName = 'Bernardsville'}
else if( townName =='Bethlehem Township'){ townName = 'Bethlehem'}
else if( townName =='Beverly City'){ townName = 'Beverly'}
else if( townName =='Blairstown Township'){ townName = 'Blairstown'}
else if( townName =='Bloomfield Township'){ townName = 'Bloomfield'}
else if( townName =='Bloomingdale Borough'){ townName = 'Bloomingdale'}
else if( townName =='Bloomsbury Borough'){ townName = 'Bloomsbury'}
else if( townName =='Bogota Borough'){ townName = 'Bogota'}
else if( townName =='Boonton Town'){ townName = 'Boonton'}
else if( townName =='Boonton Township'){ townName = 'Boonton Township'}
else if( townName =='Bordentown City'){ townName = 'Bordentown'}
else if( townName =='Bordentown Township'){ townName = 'Bordentown Township'}
else if( townName =='Bound Brook Borough'){ townName = 'Bound Brook'}
else if( townName =='Bradley Beach Borough'){ townName = 'Bradley Beach'}
else if( townName =='Branchburg Township'){ townName = 'Branchburg'}
else if( townName =='Branchville Borough'){ townName = 'Branchville'}
else if( townName =='Brick Township'){ townName = 'Brick'}
else if( townName =='Bridgeton City'){ townName = 'Bridgeton'}
else if( townName =='Bridgewater Township'){ townName = 'Bridgewater'}
else if( townName =='Brielle Borough'){ townName = 'Brielle'}
else if( townName =='Brigantine City'){ townName = 'Brigantine'}
else if( townName =='Brooklawn Borough'){ townName = 'Brooklawn'}
else if( townName =='Buena Borough'){ townName = 'Buena'}
else if( townName =='Buena Vista Township'){ townName = 'Buena Vista Township'}
else if( townName =='Burlington City'){ townName = 'Burlington'}
else if( townName =='Burlington Township'){ townName = 'Burlington Township'}
else if( townName =='Butler Borough'){ townName = 'Butler'}
else if( townName =='Byram Township'){ townName = 'Byram'}
else if( townName =='Caldwell Borough'){ townName = 'Caldwell'}
else if( townName =='Califon Borough'){ townName = 'Califon'}
else if( townName =='Camden City'){ townName = 'Camden'}
else if( townName =='Cape May City'){ townName = 'Cape May'}
else if( townName =='Cape May Point Borough'){ townName = 'Cape May Point'}
else if( townName =='Carlstadt Borough'){ townName = 'Carlstadt'}
else if( townName =='Carneys Point Township'){ townName = 'Carneys Point'}
else if( townName =='Carteret Borough'){ townName = 'Carteret'}
else if( townName =='Cedar Grove Township'){ townName = 'Cedar Grove'}
else if( townName =='Chatham Borough'){ townName = 'Chatham'}
else if( townName =='Chatham Township'){ townName = 'Chatham Township'}
else if( townName =='Cherry Hill Township'){ townName = 'Cherry Hill'}
else if( townName =='Chesilhurst Borough'){ townName = 'Chesilhurst'}
else if( townName =='Chester Borough'){ townName = 'Chester'}
else if( townName =='Chester Township'){ townName = 'Chester Township'}
else if( townName =='Chesterfield Township'){ townName = 'Chesterfield Township'}
else if( townName =='Cinnaminson Township'){ townName = 'Cinnaminson'}
else if( townName =='City of Orange Township'){ townName = 'City of Orange'}
else if( townName =='Clark Township'){ townName = 'Clark'}
else if( townName =='Clayton Borough'){ townName = 'Clayton'}
else if( townName =='Clementon Borough'){ townName = 'Clementon'}
else if( townName =='Cliffside Park Borough'){ townName = 'Cliffside Park'}
else if( townName =='Clifton City'){ townName = 'Clifton'}
else if( townName =='Clinton Town'){ townName = 'Clinton'}
else if( townName =='Clinton Township'){ townName = 'Clinton Township'}
else if( townName =='Closter Borough'){ townName = 'Closter'}
else if( townName =='Collingswood Borough'){ townName = 'Collingswood'}
else if( townName =='Colts Neck Township'){ townName = 'Colts Neck'}
else if( townName =='Commercial Township'){ townName = 'Commercial Township'}
else if( townName =='Corbin City'){ townName = 'Corbin City'}
else if( townName =='Cranbury Township'){ townName = 'Cranbury Township'}
else if( townName =='Cranford Township'){ townName = 'Cranford'}
else if( townName =='Cresskill Borough'){ townName = 'Cresskill'}
else if( townName =='Deal Borough'){ townName = 'Deal'}
else if( townName =='Deerfield Township'){ townName = 'Deerfield'}
else if( townName =='Delanco Township'){ townName = 'Delanco'}
else if( townName =='Delaware Township'){ townName = 'Delaware'}
else if( townName =='Delran Township'){ townName = 'Delran'}
else if( townName =='Demarest Borough'){ townName = 'Demarest'}
else if( townName =='Dennis Township'){ townName = 'Dennis'}
else if( townName =='Denville Township'){ townName = 'Denville'}
else if( townName =='Deptford Township'){ townName = 'Deptford Township'}
else if( townName =='Dover Town'){ townName = 'Dover'}
else if( townName =='Downe Township'){ townName = 'Downe'}
else if( townName =='Dumont Borough'){ townName = 'Dumont'}
else if( townName =='Dunellen Borough'){ townName = 'Dunellen'}
else if( townName =='Eagleswood Township'){ townName = 'Eagleswood'}
else if( townName =='East Amwell Township'){ townName = 'East Amwell'}
else if( townName =='East Brunswick Township'){ townName = 'East Brunswick'}
else if( townName =='East Greenwich Township'){ townName = 'East Greenwich Township'}
else if( townName =='East Hanover Township'){ townName = 'East Hanover'}
else if( townName =='East Newark Borough'){ townName = 'East Newark'}
else if( townName =='East Orange City'){ townName = 'East Orange'}
else if( townName =='East Rutherford Borough'){ townName = 'East Rutherford'}
else if( townName =='East Windsor Township'){ townName = 'East Windsor'}
else if( townName =='Eastampton Township'){ townName = 'Eastampton Township'}
else if( townName =='Eatontown Borough'){ townName = 'Eatontown'}
else if( townName =='Edgewater Borough'){ townName = 'Edgewater'}
else if( townName =='Edgewater Park Township'){ townName = 'Edgewater Park'}
else if( townName =='Edison Township'){ townName = 'Edison'}
else if( townName =='Egg Harbor City'){ townName = 'Egg Harbor City'}
else if( townName =='Egg Harbor Township'){ townName = 'Egg Harbor Towbship'}
else if( townName =='Elizabeth City'){ townName = 'Elizabeth'}
else if( townName =='Elk Township'){ townName = 'Elk'}
else if( townName =='Elmer Borough'){ townName = 'Elmer'}
else if( townName =='Elmwood Park Borough'){ townName = 'Elmwood Park'}
else if( townName =='Elsinboro Township'){ townName = 'Elsinboro'}
else if( townName =='Emerson Borough'){ townName = 'Emerson'}
else if( townName =='Englewood City'){ townName = 'Englewood'}
else if( townName =='Englewood Cliffs Borough'){ townName = 'Englewood Cliffs'}
else if( townName =='Englishtown Borough'){ townName = 'Englishtown'}
else if( townName =='Essex Fells Borough'){ townName = 'Essex Fells'}
else if( townName =='Estell Manor City'){ townName = 'Estell Manor'}
else if( townName =='Evesham Township'){ townName = 'Evesham Township'}
else if( townName =='Ewing Township'){ townName = 'Ewing'}
else if( townName =='Fair Haven Borough'){ townName = 'Fair Haven'}
else if( townName =='Fair Lawn Borough'){ townName = 'Fair Lawn'}
else if( townName =='Fairfield Township'){ townName = 'Fairfield Township'}
else if( townName =='Fairfield Township' && County=='Essex County'){ townName = 'Fairfield'}
else if( townName =='Fairview Borough'){ townName = 'Fairview'}
else if( townName =='Fanwood Borough'){ townName = 'Fanwood'}
else if( townName =='Far Hills Borough'){ townName = 'Far Hills'}
else if( townName =='Farmingdale Borough'){ townName = 'Farmingdale'}
else if( townName =='Fieldsboro Borough'){ townName = 'Fieldsboro'}
else if( townName =='Flemington Borough'){ townName = 'Flemington'}
else if( townName =='Florence Township'){ townName = 'Florence Township'}
else if( townName =='Florham Park Borough'){ townName = 'Florham Park'}
else if( townName =='Folsom Borough'){ townName = 'Folsom'}
else if( townName =='Fort Lee Borough'){ townName = 'Fort Lee'}
else if( townName =='Frankford Township'){ townName = 'Frankford'}
else if( townName =='Franklin Borough'){ townName = 'Franklin'}
else if( townName =='Franklin Lakes Borough'){ townName = 'Franklin Lakes'}
else if( townName =='Franklin Township'){ townName = 'Franklin Township'}
else if( townName =='Franklin Township'){ townName = 'Franklin Township'}
else if( townName =='Franklin Township'){ townName = 'Franklin Township'}
else if( townName =='Franklin Township'){ townName = 'Franklin Township'}
else if( townName =='Fredon Township'){ townName = 'Fredon '}
else if( townName =='Freehold Borough'){ townName = 'Freehold'}
else if( townName =='Freehold Township'){ townName = 'Freehold Township'}
else if( townName =='Frelinghuysen Township'){ townName = 'Frelinghuysen'}
else if( townName =='Frenchtown Borough'){ townName = 'Frenchtown'}
else if( townName =='Galloway Township'){ townName = 'Galloway'}
else if( townName =='Garfield City'){ townName = 'Garfield'}
else if( townName =='Garwood Borough'){ townName = 'Garwood'}
else if( townName =='Gibbsboro Borough'){ townName = 'Gibbsboro'}
else if( townName =='Glassboro Borough'){ townName = 'Glassboro'}
else if( townName =='Glen Gardner Borough'){ townName = 'Glen Gardner'}
else if( townName =='Glen Ridge Borough'){ townName = 'Glen Ridge'}
else if( townName =='Glen Rock Borough'){ townName = 'Glen Rock'}
else if( townName =='Gloucester City'){ townName = 'Gloucester City'}
else if( townName =='Gloucester Township'){ townName = 'Gloucester Township'}
else if( townName =='Green Brook Township'){ townName = 'Green Brook Township'}
else if( townName =='Green Township'){ townName = 'Green'}
else if( townName =='Greenwich Township'){ townName = 'Greenwich Township'}
else if( townName =='Greenwich Township' && County=='Cumberland County'){ townName = 'Greenwich'}
else if( townName =='Greenwich Township'){ townName = 'Greenwich Township'}
else if( townName =='Guttenberg Town'){ townName = 'Guttenberg'}
else if( townName =='Hackensack City'){ townName = 'Hackensack'}
else if( townName =='Hackettstown Town'){ townName = 'Hackettstown'}
else if( townName =='Haddon Heights Borough'){ townName = 'Haddon Heights'}
else if( townName =='Haddon Township'){ townName = 'Haddon Township'}
else if( townName =='Haddonfield Borough'){ townName = 'Haddonfield'}
else if( townName =='Hainesport Township'){ townName = 'Hainesport'}
else if( townName =='Haledon Borough'){ townName = 'Haledon'}
else if( townName =='Hamburg Borough'){ townName = 'Hamburg'}
else if( townName =='Hamilton Township'){ townName = 'Hamilton Township'}
else if( townName =='Hamilton Township'){ townName = 'Hamilton Township'}
else if( townName =='Hammonton Town'){ townName = 'Hammonton'}
else if( townName =='Hampton Borough'){ townName = 'Hampton'}
else if( townName =='Hampton Township'){ townName = 'Hampton Township'}
else if( townName =='Hanover Township'){ townName = 'Hanover'}
else if( townName =='Harding Township'){ townName = 'Harding'}
else if( townName =='Hardwick Township'){ townName = 'Hardwick'}
else if( townName =='Hardyston Township'){ townName = 'Hardyston'}
else if( townName =='Harmony Township'){ townName = 'Harmony'}
else if( townName =='Harrington Park Borough'){ townName = 'Harrington Park'}
else if( townName =='Harrison Town'){ townName = 'Harrison'}
else if( townName =='Harrison Township'){ townName = 'Harrison Township'}
else if( townName =='Harvey Cedars Borough'){ townName = 'Harvey Cedars'}
else if( townName =='Hasbrouck Heights Borough'){ townName = 'Hasbrouck Heights'}
else if( townName =='Haworth Borough'){ townName = 'Haworth'}
else if( townName =='Hawthorne Borough'){ townName = 'Hawthorne'}
else if( townName =='Hazlet Township'){ townName = 'Hazlet'}
else if( townName =='Helmetta Borough'){ townName = 'Helmetta'}
else if( townName =='High Bridge Borough'){ townName = 'High Bridge'}
else if( townName =='Highland Park Borough'){ townName = 'Highland Park'}
else if( townName =='Highlands Borough'){ townName = 'Highlands'}
else if( townName =='Hightstown Borough'){ townName = 'Hightstown'}
else if( townName =='Hillsborough Township'){ townName = 'Hillsborough'}
else if( townName =='Hillsdale Borough'){ townName = 'Hillsdale'}
else if( townName =='Hillside Township'){ townName = 'Hillside'}
else if( townName =='Hi-Nella Borough'){ townName = 'Hi-Nella'}
else if( townName =='Hoboken City'){ townName = 'Hoboken'}
else if( townName =='Ho-Ho-Kus Borough'){ townName = 'Ho-Ho-Kus'}
else if( townName =='Holland Township'){ townName = 'Holland'}
else if( townName =='Holmdel Township'){ townName = 'Holmdel'}
else if( townName =='Hopatcong Borough'){ townName = 'Hopatcong'}
else if( townName =='Hope Township'){ townName = 'Hope'}
else if( townName =='Hopewell Borough'){ townName = 'Hopewell'}
else if( townName =='Hopewell Township'){ townName = 'Hopewell Township'}
else if( townName =='Hopewell Township'){ townName = 'Hopewell Township'}
else if( townName =='Howell Township'){ townName = 'Howell'}
else if( townName =='Independence Township'){ townName = 'Independence'}
else if( townName =='Interlaken Borough'){ townName = 'Interlaken'}
else if( townName =='Irvington Township'){ townName = 'Irvington'}
else if( townName =='Island Heights Borough'){ townName = 'Island Heights'}
else if( townName =='Jackson Township'){ townName = 'Jackson'}
else if( townName =='Jamesburg Borough'){ townName = 'Jamesburg'}
else if( townName =='Jefferson Township'){ townName = 'Jefferson'}
else if( townName =='Jersey City'){ townName = 'Jersey City: { }'}
else if( townName =='Keansburg Borough'){ townName = 'Keansburg'}
else if( townName =='Kearny Town'){ townName = 'Kearny'}
else if( townName =='Kenilworth Borough'){ townName = 'Kenilworth'}
else if( townName =='Keyport Borough'){ townName = 'Keyport'}
else if( townName =='Kingwood Township'){ townName = 'Kingwood'}
else if( townName =='Kinnelon Borough'){ townName = 'Kinnelon'}
else if( townName =='Knowlton Township'){ townName = 'Knowlton'}
else if( townName =='Lacey Township'){ townName = 'Lacey'}
else if( townName =='Lafayette Township'){ townName = 'Lafayette'}
else if( townName =='Lake Como Borough'){ townName = 'Lake Como'}
else if( townName =='Lakehurst Borough'){ townName = 'Lakehurst'}
else if( townName =='Lakewood Township'){ townName = 'Lakewood'}
else if( townName =='Lambertville City'){ townName = 'Lambertville'}
else if( townName =='Laurel Springs Borough'){ townName = 'Laurel Springs'}
else if( townName =='Lavallette Borough'){ townName = 'Lavallette'}
else if( townName =='Lawnside Borough'){ townName = 'Lawnside'}
else if( townName =='Lawrence Township'){ townName = 'Lawrence Township'}
else if( townName =='Lawrence Township'){ townName = 'Lawrence Township'}
else if( townName =='Lebanon Borough'){ townName = 'Lebanon'}
else if( townName =='Lebanon Township'){ townName = 'Lebanon Township'}
else if( townName =='Leonia Borough'){ townName = 'Leonia'}
else if( townName =='Liberty Township'){ townName = 'Liberty'}
else if( townName =='Lincoln Park Borough'){ townName = 'Lincoln Park'}
else if( townName =='Linden City'){ townName = 'Linden'}
else if( townName =='Lindenwold Borough'){ townName = 'Lindenwold'}
else if( townName =='Linwood City'){ townName = 'Linwood'}
else if( townName =='Little Egg Harbor Township'){ townName = 'Little Egg Harbor'}
else if( townName =='Little Falls Township'){ townName = 'Little Falls'}
else if( townName =='Little Ferry Borough'){ townName = 'Little Ferry'}
else if( townName =='Little Silver Borough'){ townName = 'Little Silver'}
else if( townName =='Livingston Township'){ townName = 'Livingston'}
else if( townName =='Loch Arbour Village'){ townName = 'Loch Arbour'}
else if( townName =='Lodi Borough'){ townName = 'Lodi'}
else if( townName =='Logan Township'){ townName = 'Logan Township'}
else if( townName =='Long Beach Township'){ townName = 'Long Beach'}
else if( townName =='Long Branch City'){ townName = 'Long Branch'}
else if( townName =='Long Hill Township'){ townName = 'Long Hill'}
else if( townName =='Longport Borough'){ townName = 'Longport'}
else if( townName =='Lopatcong Township'){ townName = 'Lopatcong'}
else if( townName =='Lower Alloways Creek Township'){ townName = 'Lower Alloways Creek'}
else if( townName =='Lower Township'){ townName = 'Lower Township'}
else if( townName =='Lumberton Township'){ townName = 'Lumberton'}
else if( townName =='Lyndhurst Township'){ townName = 'Lyndhurst'}
else if( townName =='Madison Borough'){ townName = 'Madison'}
else if( townName =='Magnolia Borough'){ townName = 'Magnolia'}
else if( townName =='Mahwah Township'){ townName = 'Mahwah'}
else if( townName =='Manalapan Township'){ townName = 'Manalapan Township'}
else if( townName =='Manasquan Borough'){ townName = 'Manasquan'}
else if( townName =='Manchester Township'){ townName = 'Manchester'}
else if( townName =='Mannington Township'){ townName = 'Mannington'}
else if( townName =='Mansfield Township'){ townName = 'Mansfield Township'}
else if( townName =='Mansfield Township'){ townName = 'Mansfield Township'}
else if( townName =='Mantoloking Borough'){ townName = 'Mantoloking'}
else if( townName =='Mantua Township'){ townName = 'Mantua'}
else if( townName =='Manville Borough'){ townName = 'Manville'}
else if( townName =='Maple Shade Township'){ townName = 'Maple Shade'}
else if( townName =='Maplewood Township'){ townName = 'Maplewood'}
else if( townName =='Margate City'){ townName = 'Margate City'}
else if( townName =='Marlboro Township'){ townName = 'Marlboro'}
else if( townName =='Matawan Borough'){ townName = 'Matawan'}
else if( townName =='Maurice River Township'){ townName = 'Maurice River'}
else if( townName =='Maywood Borough'){ townName = 'Maywood'}
else if( townName =='Medford Lakes Borough'){ townName = 'Medford Lakes'}
else if( townName =='Medford Township'){ townName = 'Medford'}
else if( townName =='Mendham Borough'){ townName = 'Mendham Township'}
else if( townName =='Mendham Township'){ townName = 'Mendham'}
else if( townName =='Merchantville Borough'){ townName = 'Merchantville'}
else if( townName =='Metuchen Borough'){ townName = 'Metuchen'}
else if( townName =='Middle Township'){ townName = 'Middle Township'}
else if( townName =='Middlesex Borough'){ townName = 'Middlesex'}
else if( townName =='Middletown Township'){ townName = 'Middletown'}
else if( townName =='Midland Park Borough'){ townName = 'Midland Park'}
else if( townName =='Milford Borough'){ townName = 'Milford'}
else if( townName =='Millburn Township'){ townName = 'Millburn'}
else if( townName =='Millstone Borough'){ townName = 'Millstone'}
else if( townName =='Millstone Township'){ townName = 'Millstone'}
else if( townName =='Milltown Borough'){ townName = 'Milltown'}
else if( townName =='Millville City'){ townName = 'Millville'}
else if( townName =='Mine Hill Township'){ townName = 'Mine Hill'}
else if( townName =='Monmouth Beach Borough'){ townName = 'Monmouth Beach'}
else if( townName =='Monroe Township'){ townName = 'Monroe Township'}
else if( townName =='Monroe Township'){ townName = 'Monroe Township'}
else if( townName =='Montague Township'){ townName = 'Montague'}
else if( townName =='Montclair Township'){ townName = 'Montclair'}
else if( townName =='Montgomery Township'){ townName = 'Montgomery'}
else if( townName =='Montvale Borough'){ townName = 'Montvale'}
else if( townName =='Montville Township'){ townName = 'Montville'}
else if( townName =='Moonachie Borough'){ townName = 'Moonachie'}
else if( townName =='Moorestown Township'){ townName = 'Moorestown'}
else if( townName =='Morris Plains Borough'){ townName = 'Morris Plains'}
else if( townName =='Morris Township'){ townName = 'Morris Township'}
else if( townName =='Morristown Town'){ townName = 'Morristown'}
else if( townName =='Mount Arlington Borough'){ townName = 'Mount Arlington'}
else if( townName =='Mount Ephraim Borough'){ townName = 'Mount Ephraim'}
else if( townName =='Mount Holly Township'){ townName = 'Mount Holly'}
else if( townName =='Mount Laurel Township'){ townName = 'Mount Laurel'}
else if( townName =='Mount Olive Township'){ townName = 'Mount Olive'}
else if( townName =='Mountain Lakes Borough'){ townName = 'Mountain Lakes'}
else if( townName =='Mountainside Borough'){ townName = 'Mountainside'}
else if( townName =='Mullica Township'){ townName = 'Mullica'}
else if( townName =='National Park Borough'){ townName = 'National Park'}
else if( townName =='Neptune City Borough'){ townName = 'Neptune City'}
else if( townName =='Neptune Township'){ townName = 'Neptune Township'}
else if( townName =='Netcong Borough'){ townName = 'Netcong'}
else if( townName =='New Brunswick City'){ townName = 'New Brunswick'}
else if( townName =='New Hanover Township'){ townName = 'New Hanover'}
else if( townName =='New Milford Borough'){ townName = 'New Milford'}
else if( townName =='New Providence Borough'){ townName = 'New Providence'}
else if( townName =='Newark City'){ townName = 'Newark'}
else if( townName =='Newfield Borough'){ townName = 'Newfield'}
else if( townName =='Newton Town'){ townName = 'Newton'}
else if( townName =='North Arlington Borough'){ townName = 'North Arlington'}
else if( townName =='North Bergen Township'){ townName = 'North Bergen'}
else if( townName =='North Brunswick Township'){ townName = 'North Brunswick'}
else if( townName =='North Caldwell Borough'){ townName = 'North Caldwell'}
else if( townName =='North Haledon Borough'){ townName = 'North Haledon'}
else if( townName =='North Hanover Township'){ townName = 'North Hanover'}
else if( townName =='North Plainfield Borough'){ townName = 'North Plainfield'}
else if( townName =='North Wildwood City'){ townName = 'North Wildwood'}
else if( townName =='Northfield City'){ townName = 'Northfield'}
else if( townName =='Northvale Borough'){ townName = 'Northvale'}
else if( townName =='Norwood Borough'){ townName = 'Norwood'}
else if( townName =='Nutley Township'){ townName = 'Nutley'}
else if( townName =='Oakland Borough'){ townName = 'Oakland'}
else if( townName =='Oaklyn Borough'){ townName = 'Oaklyn'}
else if( townName =='Ocean City'){ townName = 'Ocean City'}
else if( townName =='Ocean Gate Borough'){ townName = 'Ocean Gate'}
else if( townName =='Ocean Township'){ townName = 'Ocean Township'}
else if( townName =='Ocean Township'){ townName = 'Ocean Township'}
else if( townName =='Oceanport Borough'){ townName = 'Oceanport'}
else if( townName =='Ogdensburg Borough'){ townName = 'Ogdensburg'}
else if( townName =='Old Bridge Township'){ townName = 'Old Bridge'}
else if( townName =='Old Tappan Borough'){ townName = 'Old Tappan'}
else if( townName =='Oldmans Township'){ townName = 'Oldmans'}
else if( townName =='Oradell Borough'){ townName = 'Oradell'}
else if( townName =='Oxford Township'){ townName = 'Oxford'}
else if( townName =='Palisades Park Borough'){ townName = 'Palisades Park'}
else if( townName =='Palmyra Borough'){ townName = 'Palmyra'}
else if( townName =='Paramus Borough'){ townName = 'Paramus'}
else if( townName =='Park Ridge Borough'){ townName = 'Park Ridge'}
else if( townName =='Parsippany-Troy Hills Township'){ townName = 'Parsippany-Troy Hills'}
else if( townName =='Passaic City'){ townName = 'Passaic'}
else if( townName =='Paterson City'){ townName = 'Paterson'}
else if( townName =='Paulsboro Borough'){ townName = 'Paulsboro'}
else if( townName =='Peapack-Gladstone Borough'){ townName = 'Peapack Gladstone'}
else if( townName =='Pemberton Borough'){ townName = 'Pemberton'}
else if( townName =='Pemberton Township'){ townName = 'Pemberton Township'}
else if( townName =='Pennington Borough'){ townName = 'Pennington'}
else if( townName =='Penns Grove Borough'){ townName = 'Penns Grove'}
else if( townName =='Pennsauken Township'){ townName = 'Pennsauken Township'}
else if( townName =='Pennsville Township'){ townName = 'Pennsville'}
else if( townName =='Pequannock Township'){ townName = 'Pequannock'}
else if( townName =='Perth Amboy City'){ townName = 'Perth Amboy'}
else if( townName =='Phillipsburg Town'){ townName = 'Phillipsburg'}
else if( townName =='Pilesgrove Township'){ townName = 'Pilesgrove'}
else if( townName =='Pine Beach Borough'){ townName = 'Pine Beach'}
else if( townName =='Pine Hill Borough'){ townName = 'Pine Hill'}
else if( townName =='Pine Valley Borough'){ townName = 'Pine Valley'}
else if( townName =='Piscataway Township'){ townName = 'Piscataway'}
else if( townName =='Pitman Borough'){ townName = 'Pitman'}
else if( townName =='Pittsgrove Township'){ townName = 'Pittsgrove'}
else if( townName =='Plainfield City'){ townName = 'Plainfield'}
else if( townName =='Plainsboro Township'){ townName = 'Plainsboro'}
else if( townName =='Pleasantville City'){ townName = 'Pleasantville'}
else if( townName =='Plumsted Township'){ townName = 'Plumsted'}
else if( townName =='Pohatcong Township'){ townName = 'Pohatcong'}
else if( townName =='Point Pleasant Beach Borough'){ townName = 'Point Pleasant Beach'}
else if( townName =='Point Pleasant Borough'){ townName = 'Point Pleasant'}
else if( townName =='Pompton Lakes Borough'){ townName = 'Pompton Lakes'}
else if( townName =='Port Republic City'){ townName = 'Port Republic'}
else if( townName =='Princeton'){ townName = 'Princeton'}
else if( townName =='Prospect Park Borough'){ townName = 'Prospect Park'}
else if( townName =='Quinton Township'){ townName = 'Quinton'}
else if( townName =='Rahway City'){ townName = 'Rahway'}
else if( townName =='Ramsey Borough'){ townName = 'Ramsey'}
else if( townName =='Randolph Township'){ townName = 'Randolph'}
else if( townName =='Raritan Borough'){ townName = 'Raritan'}
else if( townName =='Raritan Township'){ townName = 'Raritan Township'}
else if( townName =='Readington Township'){ townName = 'Readington'}
else if( townName =='Red Bank Borough'){ townName = 'Red Bank'}
else if( townName =='Ridgefield Borough'){ townName = 'Ridgefield'}
else if( townName =='Ridgefield Park Village'){ townName = 'Ridgefield Park'}
else if( townName =='Ridgewood Village'){ townName = 'Ridgewood'}
else if( townName =='Ringwood Borough'){ townName = 'Ringwood'}
else if( townName =='River Edge Borough'){ townName = 'River Edge'}
else if( townName =='River Vale Township'){ townName = 'River Vale'}
else if( townName =='Riverdale Borough'){ townName = 'Riverdale'}
else if( townName =='Riverside Township'){ townName = 'Riverside'}
else if( townName =='Riverton Borough'){ townName = 'Riverton'}
else if( townName =='Robbinsville Township'){ townName = 'Robbinsville'}
else if( townName =='Rochelle Park Township'){ townName = 'Rochelle Park'}
else if( townName =='Rockaway Borough'){ townName = 'Rockaway'}
else if( townName =='Rockaway Township'){ townName = 'Rockaway Township'}
else if( townName =='Rockleigh Borough'){ townName = 'Rockleigh'}
else if( townName =='Rocky Hill Borough'){ townName = 'Rocky Hill'}
else if( townName =='Roosevelt Borough'){ townName = 'Roosevelt'}
else if( townName =='Roseland Borough'){ townName = 'Roseland'}
else if( townName =='Roselle Borough'){ townName = 'Roselle'}
else if( townName =='Roselle Park Borough'){ townName = 'Roselle Park'}
else if( townName =='Roxbury Township'){ townName = 'Roxbury'}
else if( townName =='Rumson Borough'){ townName = 'Rumson'}
else if( townName =='Runnemede Borough'){ townName = 'Runnemede'}
else if( townName =='Rutherford Borough'){ townName = 'Rutherford'}
else if( townName =='Saddle Brook Township'){ townName = 'Saddle Brook'}
else if( townName =='Saddle River Borough'){ townName = 'Saddle River'}
else if( townName =='Salem City'){ townName = 'Salem'}
else if( townName =='Sandyston Township'){ townName = 'Sandyston'}
else if( townName =='Sayreville Borough'){ townName = 'Sayreville'}
else if( townName =='Scotch Plains Township'){ townName = 'Scotch Plains'}
else if( townName =='Sea Bright Borough'){ townName = 'Sea Bright'}
else if( townName =='Sea Girt Borough'){ townName = 'Sea Girt'}
else if( townName =='Sea Isle City'){ townName = 'Sea Isle City'}
else if( townName =='Seaside Heights Borough'){ townName = 'Seaside Heights'}
else if( townName =='Seaside Park Borough'){ townName = 'Seaside Park'}
else if( townName =='Secaucus Town'){ townName = 'Secaucus'}
else if( townName =='Shamong Township'){ townName = 'Shamong'}
else if( townName =='Shiloh Borough'){ townName = 'Shiloh'}
else if( townName =='Ship Bottom Borough'){ townName = 'Ship Bottom'}
else if( townName =='Shrewsbury Borough'){ townName = 'Shrewsbury'}
else if( townName =='Shrewsbury Township'){ townName = 'Shrewsbury Township'}
else if( townName =='Somerdale Borough'){ townName = 'Somerdale'}
else if( townName =='Somers Point City'){ townName = 'Somers Point'}
else if( townName =='Somerville Borough'){ townName = 'Somerville'}
else if( townName =='South Amboy City'){ townName = 'South Amboy'}
else if( townName =='South Bound Brook Borough'){ townName = 'South Bound Brook'}
else if( townName =='South Brunswick Township'){ townName = 'South Brunswick'}
else if( townName =='South Hackensack Township'){ townName = 'South Hackensack'}
else if( townName =='South Harrison Township'){ townName = 'South Harrison'}
else if( townName =='South Orange Village Township'){ townName = 'South Orange'}
else if( townName =='South Plainfield Borough'){ townName = 'South Plainfield'}
else if( townName =='South River Borough'){ townName = 'South River'}
else if( townName =='South Toms River Borough'){ townName = 'South Toms River'}
else if( townName =='Southampton Township'){ townName = 'Southampton'}
else if( townName =='Sparta Township'){ townName = 'Sparta'}
else if( townName =='Spotswood Borough'){ townName = 'Spotswood'}
else if( townName =='Spring Lake Borough'){ townName = 'Spring Lake'}
else if( townName =='Spring Lake Heights Borough'){ townName = 'Spring Lake Heights'}
else if( townName =='Springfield Township'){ townName = 'Springfield'}
else if( townName =='Springfield Township'){ townName = 'Springfield'}
else if( townName =='Stafford Township'){ townName = 'Stafford'}
else if( townName =='Stanhope Borough'){ townName = 'Stanhope'}
else if( townName =='Stillwater Township'){ townName = 'Stillwater'}
else if( townName =='Stockton Borough'){ townName = 'Stockton'}
else if( townName =='Stone Harbor Borough'){ townName = 'Stone Harbor'}
else if( townName =='Stow Creek Township'){ townName = 'Stow Creek'}
else if( townName =='Stratford Borough'){ townName = 'Stratford'}
else if( townName =='Summit City'){ townName = 'Summit'}
else if( townName =='Surf City Borough'){ townName = 'Surf City'}
else if( townName =='Sussex Borough'){ townName = 'Sussex'}
else if( townName =='Swedesboro Borough'){ townName = 'Swedesboro'}
else if( townName =='Tabernacle Township'){ townName = 'Tabernacle'}
else if( townName =='Tavistock Borough'){ townName = 'Tavistock'}
else if( townName =='Teaneck Township'){ townName = 'Teaneck'}
else if( townName =='Tenafly Borough'){ townName = 'Tenafly'}
else if( townName =='Teterboro Borough'){ townName = 'Teterboro'}
else if( townName =='Tewksbury Township'){ townName = 'Tewksbury'}
else if( townName =='Tinton Falls Borough'){ townName = 'Tinton Falls'}
else if( townName =='Toms River Township'){ townName = 'Toms River'}
else if( townName =='Totowa Borough'){ townName = 'Totowa'}
else if( townName =='Trenton City'){ townName = 'Trenton'}
else if( townName =='Tuckerton Borough'){ townName = 'Tuckerton'}
else if( townName =='Union Beach Borough'){ townName = 'Union Beach'}
else if( townName =='Union City'){ townName = 'Union City'}
else if( townName =='Union Township'){ townName = 'Union Township'}
else if( townName =='Union Township'){ townName = 'Union Township'}
else if( townName =='Upper Deerfield Township'){ townName = 'Upper Deerfield'}
else if( townName =='Upper Freehold Township'){ townName = 'Upper Freehold'}
else if( townName =='Upper Pittsgrove Township'){ townName = 'Upper Pittsgrove'}
else if( townName =='Upper Saddle River Borough'){ townName = 'Upper Saddle River'}
else if( townName =='Upper Township'){ townName = 'Upper Township'}
else if( townName =='Ventnor City'){ townName = 'Ventnor City'}
else if( townName =='Vernon Township'){ townName = 'Vernon'}
else if( townName =='Verona Township'){ townName = 'Verona'}
else if( townName =='Victory Gardens Borough'){ townName = 'Victory Gardens'}
else if( townName =='Vineland City'){ townName = 'Vineland'}
else if( townName =='Voorhees Township'){ townName = 'Voorhees Township'}
else if( townName =='Waldwick Borough'){ townName = 'Waldwick'}
else if( townName =='Wall Township'){ townName = 'Wall'}
else if( townName =='Wallington Borough'){ townName = 'Wallington'}
else if( townName =='Walpack Township'){ townName = 'Walpack'}
else if( townName =='Wanaque Borough'){ townName = 'Wanaque'}
else if( townName =='Wantage Township'){ townName = 'Wantage'}
else if( townName =='Warren Township'){ townName = 'Warren'}
else if( townName =='Washington Borough'){ townName = 'Washington'}
else if( townName =='Washington Township'){ townName = 'Washington Township'}
else if( townName =='Washington Township'){ townName = 'Washington Township'}
else if( townName =='Washington Township'){ townName = 'Washington Township'}
else if( townName =='Washington Township'){ townName = 'Washington Township'}
else if( townName =='Washington Township'){ townName = 'Washington Township'}
else if( townName =='Watchung Borough'){ townName = 'Watchung'}
else if( townName =='Waterford Township'){ townName = 'Waterford'}
else if( townName =='Wayne Township'){ townName = 'Wayne'}
else if( townName =='Weehawken Township'){ townName = 'Weehawken'}
else if( townName =='Wenonah Borough'){ townName = 'Wenonah'}
else if( townName =='West Amwell Township'){ townName = 'West Amwell'}
else if( townName =='West Caldwell Township'){ townName = 'West Caldwell'}
else if( townName =='West Cape May Borough'){ townName = 'West Cape May'}
else if( townName =='West Deptford Township'){ townName = 'West Deptford'}
else if( townName =='West Long Branch Borough'){ townName = 'West Long Branch'}
else if( townName =='West Milford Township'){ townName = 'West Milford'}
else if( townName =='West New York Town'){ townName = 'West New York'}
else if( townName =='West Orange Township'){ townName = 'West Orange'}
else if( townName =='West Wildwood Borough'){ townName = 'West Wildwood'}
else if( townName =='West Windsor Township'){ townName = 'West Windsor'}
else if( townName =='Westampton Township'){ townName = 'Westampton'}
else if( townName =='Westfield Town'){ townName = 'Westfield'}
else if( townName =='Westville Borough'){ townName = 'Westville'}
else if( townName =='Westwood Borough'){ townName = 'Westwood'}
else if( townName =='Weymouth Township'){ townName = 'Weymouth'}
else if( townName =='Wharton Borough'){ townName = 'Wharton'}
else if( townName =='White Township'){ townName = 'White'}
else if( townName =='Wildwood City'){ townName = 'Wildwood'}
else if( townName =='Wildwood Crest Borough'){ townName = 'Wildwood Crest'}
else if( townName =='Willingboro Township'){ townName = 'Willingboro'}
else if( townName =='Winfield Township'){ townName = 'Winfield'}
else if( townName =='Winslow Township'){ townName = 'Winslow Township'}
else if( townName =='Woodbine Borough'){ townName = 'Woodbine'}
else if( townName =='Woodbridge Township'){ townName = 'Woodbridge Township'}
else if( townName =='Woodbury City'){ townName = 'Woodbury'}
else if( townName =='Woodbury Heights Borough'){ townName = 'Woodbury Heights'}
else if( townName =='Woodcliff Lake Borough'){ townName = 'Woodcliff Lake'}
else if( townName =='Woodland Park Borough'){ townName = 'Woodland Park'}
else if( townName =='Woodland Township'){ townName = 'Woodland'}
else if( townName =='Woodlynne Borough'){ townName = 'Woodlynne'}
else if( townName =='Wood-Ridge Borough'){ townName = 'Wood-Ridge'}
else if( townName =='Woodstown Borough'){ townName = 'Woodstown'}
else if( townName =='Woolwich Township'){ townName = 'Woolwich'}
else if( townName =='Wrightstown Borough'){ townName = 'Wrightstown'}
else if( townName =='Wyckoff Township'){ townName = 'Wyckoff'}
else(townName='N/A')*/	    
    
			    
			    
			    
			    
			    
			    
			    
			    
			    
			    
			    
			    
			    
			    
			    
			///////////////////////////////////////////////
	
	                if(currentHighlight_old > 0)
	                    map_prev.setPaintProperty('route-fills-' + currentHighlight_old.toString(), 'fill-opacity', 0.15);
	                if(currentHighlight_new > 0)
	                    map_curr.setPaintProperty('route-fills-' + currentHighlight_new.toString(), 'fill-opacity', 0.15);
	                currentHighlight_old = old_index
	                currentHighlight_new = new_index
			var file_name = "District " + currentHighlight_new.toString()
			var file_name_old = "District " + currentHighlight_old.toString()
			 //console.log(currentHighlight_new)
			 console.log(file_name)
			 console.log(file_name_old)
			  

			// console.log(old_district_data[file_name]['Name'])
			 var make_old_array = (old_district_data[file_name_old]['Name']).split(",")
			 var make_array = (new_district_data[file_name]['Name']).split(",")
			 console.log(make_old_array)
			 console.log(Current_Legislators[currentHighlight_new.toString()])
			 console.log(make_array)

			    
			var list_towns = []
			var uniqueNames = [];
			var final_old_array = [];
			var district_african_old = [];
			var district_asian_old = [];
			var district_hispanic_old = [];
			var district_white_old = [];
			var district_ai_old = [];
			var district_haw_old = [];
			var district_other_old = [];
			var old_african_num;
			var old_asian_num;
			var old_hispanic_num;
			var district_dem_num = [];
			var district_rep_num = [];
			var district_old_people = [];
			var district_old_voters = [];
			var final_old_array_show = [];
			var final_new_array_show = [];
			    
			var looking_names = JSON.stringify(data_2000);
			    
			    
			//$.getJSON("data/NJ_Legislative_Old/District_" + currentHighlight_old.toString() + ".geojson", function(json_coor){
			//for(var i=0; i<json_coor["features"][0]["geometry"]["coordinates"][0].length; i++){
			//var lons = json_coor["features"][0]["geometry"]["coordinates"][0][i][0]
			//var lats = json_coor["features"][0]["geometry"]["coordinates"][0][i][1]
			//var urls='https://maps.googleapis.com/maps/api/geocode/json?address=' + lats + ',' + lons + '&key=AIzaSyB-OrotjsC4Vwn-WVfJD7JeeVbMS1eyKOE';
			//const Http = new XMLHttpRequest();
				
				
	        	//Http.onreadystatechange = function() {
			 // if (this.readyState == 4 && this.status == 200) {
			  //   var data_need = JSON.parse(this.responseText);
			  //   var address_name =data_need.results[0].formatted_address.split(",")[1] 
			//	var correct_address_name = address_name.slice(1,address_name.length)
			//     var other_townName_temp = correct_address_name
			
			 //    list_towns.push(other_townName_temp);
			 //    $.each(list_towns, function(i, el){
			 //   if($.inArray(el, uniqueNames) === -1) uniqueNames.push(el);
			//	});
						
			//  }
				
			//}
			//Http.open("GET", urls) 
	      		//Http.send()


				
			//   		 }

				
			//	});
				 
			       	 		       
			       
	  		 Array.prototype.remove = function() {
			    var what, a = arguments, L = a.length, ax;
			    while (L && this.length) {
				what = a[--L];
				while ((ax = this.indexOf(what)) !== -1) {
				    this.splice(ax, 1);
				}
			    }
			    return this;
			};
 				
			      
			var district_people_estimate_current = [];      
			var list_towns_current = []
			var uniqueNames_current = [];
			var final_array_current = [];
			var district_african_current = [];
			var district_asian_current = [];
			var district_hispanic_current = [];
			var district_white_current = [];
			var district_ai_current = [];
			var district_haw_current = [];
			var district_other_current = [];
			var african_num_current;
			var asian_num_current;
			var hispanic_num_current;
			var district_dem_num_current = [];
			var district_rep_num_current = [];
			var district_people_current = [];
			var district_voters_current = [];
			var final_array_show_current = [];
			//var looking_names = JSON.stringify(data_2010);
			//var looking_names_old = JSON.stringify(data_2000);
			    
			var looking_names = JSON.stringify(new_district_data[file_name]['Name']);
			var looking_names_old = JSON.stringify(old_district_data[file_name_old]['Name']);
			//$.getJSON("data/NJ_Legislative/District_" + currentHighlight_new.toString() + ".geojson", function(json_coor_current){
			//	for(var i=0; i<json_coor_current["features"][0]["geometry"]["coordinates"][0].length; i++){
			//var lons_current = json_coor_current["features"][0]["geometry"]["coordinates"][0][i][0]
			//var lats_current = json_coor_current["features"][0]["geometry"]["coordinates"][0][i][1]
			//console.log(lats_current)
			//var urls_current='https://maps.googleapis.com/maps/api/geocode/json?address=' + lats_current + ',' + lons_current + '&key=AIzaSyB-OrotjsC4Vwn-WVfJD7JeeVbMS1eyKOE';
			//console.log(urls_current)
			//const Http_current = new XMLHttpRequest();
		
				
	        	//Http_current.onreadystatechange = function() {
			//  if (this.readyState == 4 && this.status == 200) {
			//     var data_need_current = JSON.parse(this.responseText);
			 //    var address_name_current =data_need_current.results[0].formatted_address.split(",")[1] 
			//	var correct_address_name_current = address_name_current.slice(1,address_name_current.length)
			//     var other_townName_current = correct_address_name_current
			
			//     list_towns_current.push(other_townName_current);
			  //  $.each(list_towns_current, function(i, el){
			  // if($.inArray(el, uniqueNames_current) === -1) uniqueNames_current.push(el);
			//	});
						
			//  }
				
			//}
			//Http_current.open("GET", urls_current) 
	      		//Http_current.send()
				
			   		 }
				    //console.log(list_towns_current)
			//	});
			    
			    var array_removed = []
			    var array_added = []
			    var array_final_added = []
			    var final_new_array = []
			    var rep_ratio_current = []
			    var dem_ratio_current = []
			    var african_ratio_current =[]
			    var asian_ratio_current = []
			    var hispanic_ratio_current = []
			    var white_ratio_current = []
			    var ai_ratio_current = []
			    var haw_ratio_current = []
			    var other_ratio_current = []
			    var rep_ratio_old = []
			    var dem_ratio_old = []
			    var african_ratio_old =[]
			    var asian_ratio_old = []
			    var hispanic_ratio_old = []
			    var white_ratio_old = []
			    var ai_ratio_old = []
			    var haw_ratio_old = []
			    var other_ratio_old = []
			    var target_pop_old = 212000;
			    //var target_pop_curr = 220700;
			    var target_pop_curr = 219797;
			    
			    //var show_array = []
			    
			    make_old_array.forEach(function(a, ind){
				if(looking_names_old.includes(make_old_array[ind])){
				final_old_array.push(make_old_array[ind])
			       }
			      });
			    
			  
			    
	                    make_old_array.forEach(function(a, ind){
				if(looking_names_old.includes(make_old_array[ind])){
				final_old_array_show.push(make_old_array[ind])
			       }
			    });
			    
			    //final_old_array_show = final_old_array_show.filter(e => e !== townName)
			    final_old_array_show = make_old_array.filter(e => e !== townName)
			    var show_array= final_old_array_show.join(', ')
			    final_new_array_show = make_array.filter(e => e !== townName)
			    var show_new_array = final_new_array_show.join(', ')
					     console.log(final_old_array)
			        
			        
			    	/*district_old_files[file_name_old].foreach(function(a,ind){
			    	district_african_old.push(Number(district_old_files[file_name_old][ind]['af']))
				district_asian_old.push(Number(district_old_files[file_name_old][ind]['a']))
				district_hispanic_old.push(Number(district_old_files[file_name_old][ind]['his']))
				district_ai_old.push(Number(district_old_files[file_name_old][ind]['ai']))
				district_white_old.push(Number(district_old_files[file_name_old][ind]['white']))
				district_haw_old.push(Number(district_old_files[file_name_old][ind]['haw']))
				district_other_old.push(Number(district_old_files[file_name_old][ind]['other']))
			        //district_dem_num.push(Number(data_2000[a]['democratic']))
				//district_rep_num.push(Number(data_2000[a]['republican']))
				district_old_people.push(Number(parseFloat((district_old_files[file_name_old][ind]['population']).replace(/,/g, ''))))
				district_old_voters.push(Number(parseFloat((district_old_files[file_name_old][ind]['voters']).replace(/,/g, ''))))
				});*/
			        
			    	
			    	//console.log(district_old_files[file_name]['']) 
				
				//final_old_array.forEach(function(a,ind){
			    	make_old_array.forEach(function(a,ind){
				console.log(a)
			        district_african_old.push(Number(district_old_files[file_name_old][a]['af']))
				district_asian_old.push(Number(district_old_files[file_name_old][a]['a']))
				district_hispanic_old.push(Number(district_old_files[file_name_old][a]['his']))
				district_ai_old.push(Number(district_old_files[file_name_old][a]['ai']))
				district_white_old.push(Number(district_old_files[file_name_old][a]['white']))
				district_haw_old.push(Number(district_old_files[file_name_old][a]['haw']))
				district_other_old.push(Number(district_old_files[file_name_old][a]['other']))
			        //district_dem_num.push(Number(data_2000[a]['democratic']))
				//district_rep_num.push(Number(data_2000[a]['republican']))
				district_old_people.push(Number(parseFloat((district_old_files[file_name_old][a]['population']).replace(/,/g, ''))))
				district_old_voters.push(Number(parseFloat((district_old_files[file_name_old][a]['voters']).replace(/,/g, ''))))
				});
			        
			    	
				/*district_african_old.push(Number(racedata2000[a]['af']))
				district_asian_old.push(Number(racedata2000[a]['a']))
				district_hispanic_old.push(Number(racedata2000[a]['his']))
				district_ai_old.push(Number(racedata2000[a]['ai']))
				district_white_old.push(Number(racedata2000[a]['white']))
				district_haw_old.push(Number(racedata2000[a]['haw']))
				district_other_old.push(Number(racedata2000[a]['other']))
			        //district_dem_num.push(Number(data_2000[a]['democratic']))
				//district_rep_num.push(Number(data_2000[a]['republican']))
				district_old_people.push(Number(parseFloat((data_2000[a]['population']).replace(/,/g, ''))))
				district_old_voters.push(Number(parseFloat((data_2000[a]['voters']).replace(/,/g, ''))))
				});*/
			    
			         
			    	    for(var i=0; i<district_old_people.length; i++){
				    //rep_ratio_old.push(district_old_people[i]*(district_rep_num[i]/100))
				    //dem_ratio_old.push(district_old_people[i]*(district_dem_num[i]/100))
			            white_ratio_old.push(district_old_people[i]*(district_white_old[i]/100))
				    african_ratio_old.push(district_old_people[i]*(district_african_old[i]/100))
			            ai_ratio_old.push(district_old_people[i]*(district_ai_old[i]/100))
				    asian_ratio_old.push(district_old_people[i]*(district_asian_old[i]/100))
				    haw_ratio_old.push(district_old_people[i]*(district_haw_old[i]/100))
			            other_ratio_old.push(district_old_people[i]*(district_other_old[i]/100))
				    hispanic_ratio_old.push(district_old_people[i]*(district_hispanic_old[i]/100))
			   	    }
			    
			    	/*var Town_pop = countyDataOld['population'];
			    		
			    	if(file_name_old == "District 27") {
					var Town_pop = 11992;
					
				}
			    	if(file_name_old == "District 28") {
					var Town_pop = 49495;
				}
			    	if(file_name_old == "District 29") {
					var Town_pop = 169143;
					
				}
			    	if(file_name_old == "District 31") {
					var Town_pop = 129074;
				}
			    	if(file_name_old == "District 32") {
					var Town_pop = 72669;
				}
			    	if(file_name_old == "District 33") {
					var Town_pop = 45989;
				}
			    
			    	var Town_pop_curr = countyDataCurr['population']
				
				if(file_name_old == "District 28") {
					var Town_pop_curr = 88249;
					
				}
			    	if(file_name_old == "District 29") {
					var Town_pop_curr = 188891;
				}
			    	if(file_name_old == "District 31") {
					var Town_pop_curr = 157610;
					
				}
			    	if(file_name_old == "District 33") {
					var Town_pop_curr = 89987;
				}*/
			    
			    make_array.forEach(function(a, ind){
				if(looking_names.includes(make_array[ind])){
				final_new_array.push(make_array[ind])
			       }
			      });
			    
			      
			      //final_new_array.forEach(function(t,ind){
			       		make_array.forEach(function(t,ind){
					//alert(racedata2010[t]);
				        console.log(t);
				        district_african_current.push(Number(district_new_files[file_name][t]['af']))			      
					district_asian_current.push(Number(district_new_files[file_name][t]['a']))
					district_hispanic_current.push(Number(district_new_files[file_name][t]['his']))
				        district_white_current.push(Number(district_new_files[file_name][t]['white']))
				        district_ai_current.push(Number(district_new_files[file_name][t]['ai']))
				        district_haw_current.push(Number(district_new_files[file_name][t]['haw']))
				        district_other_current.push(Number(district_new_files[file_name][t]['other']))
					//district_dem_num_current.push(Number(data_2010[a]['democratic']))
					//district_rep_num_current.push(Number(data_2010[a]['republican']))
				        district_people_estimate_current.push(Number(parseFloat((district_new_files[file_name][t]['pop_est']).replace(/,/g, ''))))
					district_people_current.push(Number(parseFloat((district_new_files[file_name][t]['population']).replace(/,/g, ''))))
					district_voters_current.push(Number(parseFloat((district_new_files[file_name][t]['voters']).replace(/,/g, ''))))
					});
			                /*district_african_current.push(Number(racedata2010[t]['af']))			      
					district_asian_current.push(Number(racedata2010[t]['a']))
					district_hispanic_current.push(Number(racedata2010[t]['his']))
				        district_white_current.push(Number(racedata2010[t]['white']))
				        district_ai_current.push(Number(racedata2010[t]['ai']))
				        district_haw_current.push(Number(racedata2010[t]['haw']))
				        district_other_current.push(Number(racedata2010[t]['other']))
					//district_dem_num_current.push(Number(data_2010[a]['democratic']))
					//district_rep_num_current.push(Number(data_2010[a]['republican']))
					district_people_current.push(Number(parseFloat((data_2010[t]['population']).replace(/,/g, ''))))
					district_voters_current.push(Number(parseFloat((data_2010[t]['voters']).replace(/,/g, ''))))
					});*/
				
			    
			    for(var i=0; i<district_people_current.length; i++){
				    //rep_ratio_current.push(district_people_current[i]*(district_rep_num_current[i]/100))
				    //dem_ratio_current.push(district_people_current[i]*(district_dem_num_current[i]/100))
				    white_ratio_current.push(district_people_current[i]*(district_white_current[i]/100))
				    african_ratio_current.push(district_people_current[i]*(district_african_current[i]/100))
				    ai_ratio_current.push(district_people_current[i]*(district_ai_current[i]/100))
				    asian_ratio_current.push(district_people_current[i]*(district_asian_current[i]/100))
				    haw_ratio_current.push(district_people_current[i]*(district_haw_current[i]/100))
				    other_ratio_current.push(district_people_current[i]*(district_other_current[i]/100))
				    hispanic_ratio_current.push(district_people_current[i]*(district_hispanic_current[i]/100))
			    }
			    
			    
			    
			 
			    
	                if(data_from_2000 == undefined) {
	                    $('#city_prev').html("<i>Your Town:</i> <b style='font-size: 22px'>" + townName + "</b>")
	                    $('#voters_prev').text("Registered Voters: N/A")
	                    $('#democratic_prev').text("N/A %")
	                    $('#republican_prev').text("N/A %")
	                    $('#population_prev').text("N/A People")
	                    $('#african_prev').text("N/A %")
	                    $('#asian_prev').text("N/A %")
	                    $('#hispanic_prev').text("N/A %")
	                    $('#taxable_prev').text("Per Capital Taxable Property Value: N/A")
	                }
	
	                else {
	                    $('#city_prev').html("<i>Your Town:</i> <b style='font-size:22px'>" + townName + "</b>")
			    // setTimeout(function(){
			         //console.log(uniqueNames)
			         
				
				var dev = (district_old_people.reduce((a, b) => a + b, 0)) - target_pop_old 
				
				if ( dev > 0) { dev = "+"+dev }
				//var dev_curr = target_pop_curr - (district_people_current.reduce((a, b) => a + b, 0))
				var dev_curr = (district_people_current.reduce((a, b) => a + b, 0)) - target_pop_curr
				if ( dev_curr > 0) { dev_curr = "+"+dev_curr }
				//console.log(target_pop_old)
				console.log(dev)
			      $('#other_city_curr').html("<u><b>Other Towns in Your District</b></u><br><br>" + show_new_array)
			      $('#other_city_prev').html("<u><b>Other Towns in Your District</b></u><br><br><br><br>" + show_array)
			      $('#white_num').text((((white_ratio_old.reduce((a, b) => a + b, 0)/ district_old_people.reduce((a, b) => a + b, 0)))*100).toFixed(2) + "%")
			      $('#african_num').text((((african_ratio_old.reduce((a, b) => a + b, 0)/ district_old_people.reduce((a, b) => a + b, 0)))*100).toFixed(2) + "%")
			      $('#ai_num').text((((ai_ratio_old.reduce((a, b) => a + b, 0)/ district_old_people.reduce((a, b) => a + b, 0)))*100).toFixed(2) + "%")
			      $('#asian_num').html((((asian_ratio_old.reduce((a, b) => a + b, 0)/ district_old_people.reduce((a, b) => a + b, 0)))*100).toFixed(2) + "%")
			      $('#haw_num').text((((haw_ratio_old.reduce((a, b) => a + b, 0)/ district_old_people.reduce((a, b) => a + b, 0)))*100).toFixed(2) + "%")
			      $('#other_num').text((((other_ratio_old.reduce((a, b) => a + b, 0)/ district_old_people.reduce((a, b) => a + b, 0)))*100).toFixed(2) + "%")
			      $('#hispanic_num').text((((hispanic_ratio_old.reduce((a, b) => a + b, 0)/ district_old_people.reduce((a, b) => a + b, 0)))*100).toFixed(2) + "%")
			      //$('#democratic_num').text((((dem_ratio_old.reduce((a, b) => a + b, 0)/ district_old_people.reduce((a, b) => a + b, 0)))*100).toFixed(2) + "%")
			      //$('#republican_num').text((((rep_ratio_old.reduce((a, b) => a + b, 0)/ district_old_people.reduce((a, b) => a + b, 0)))*100).toFixed(2) + "%")
			      $('#population_prev_num').html("Total Population: " +(district_old_people.reduce((a, b) => a + b, 0)).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ","))
			      $('#voters_prev_num').text("Registered Voters: " + (district_old_voters.reduce((a, b) => a + b, 0)).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ","))
			      //}, 10000);
		            	
				
			    $('#white_prev').text(countyDataOld['white'] + "%")
	                    $('#voters_prev').text("Registered Voters: " + countyDataOld['voters'].toString().replace(/\B(?=(\d{3})+(?!\d))/g, ","))
	                    //$('#democratic_prev').text(data_from_2000['democratic'] + "%")
	                    //$('#republican_prev').text(data_from_2000['republican'] + "%")
	                    $('#population_prev').text("Population: " + countyDataOld['population'].toString().replace(/\B(?=(\d{3})+(?!\d))/g, ","))
	                    $('#african_prev').text(countyDataOld['af'] + "%")
	                    $('#asian_prev').text(countyDataOld['a'] + "%")
			    $('#ai_prev').text(countyDataOld['ai'] + "%")
			    $('#haw_prev').text(countyDataOld['haw'] + "%")
			    $('#other_prev').text(countyDataOld['other'] + "%")
	                    $('#hispanic_prev').text(countyDataOld['his'] + "%")
	                    $('#taxable_prev').text("Per Capital Taxable Property Value: $" + data_from_2000['taxable'])
	                }
			    
			    console.log(asian_ratio_old.reduce((a, b) => a + b, 0))
				console.log(district_old_people.reduce((a, b) => a + b, 0))
				console.log((asian_ratio_old.reduce((a, b) => a + b, 0))/(district_old_people.reduce((a, b) => a + b, 0)))
			    console.log((((asian_ratio_old.reduce((a, b) => a + b, 0)/ district_old_people.reduce((a, b) => a + b, 0)))*100).toFixed(2) + "%")
				//console.log((((asian_ratio_current.reduce((a, b) => a + b, 0)/ district_old_people.reduce((a, b) => a + b, 0)))*100).toFixed(2) + "%")
	
	                if(data_from_2010 == undefined) {
	                    $('#city_curr').html("<i>Your Town:</i> <b style='font-size: 22px'>" + townName + "</b>")
	                    $('#voters_curr').text("N/A Registered Voters")
	                    $('#democratic_curr').text("N/A %")
	                    $('#republican_curr').text("N/A %")
	                    $('#population_curr').text("Town Demographics: N/A Total Population")
	                    $('#african_curr').text("N/A %")
	                    $('#asian_curr').text("N/A %")
	                    $('#hispanic_curr').text("N/A %")
	                    $('#taxable_curr').text("Per Capital Taxable Property Value: N/A")
			    $('#deviation_curr_num').text("Deviation: N/A")	
			    $('#white_curr_num').text("N/A %")
	                }
			    
			    
	
	                else {
	                    $('#city_curr').html("<i>Your Town:</i> <b style='font-size: 22px'>" + townName + "</b>")
			    //setTimeout(function(){
				  
				    
				    
				    
				    for(var i=0; i<make_array.length; i++){
				if(final_old_array.includes(make_array[i])){
					//array_removed.push(final_old_array[i])
					continue;
				}
				  else {
					  array_added.push(make_array[i])
					  //array_added.push(", ")
				  }
			    }
				    
				 
				 for(var i=0; i<final_old_array.length; i++){
					if(make_array.includes(final_old_array[i])){
						//array_final_added.push(make_array[i])
						continue;
					}
					 else{
						 array_removed.push(final_old_array[i])
						 //array_removed.push(show_new_array[i])
						 
					 }
				 }
				//console.log(array_final_added)
				//console.log(array_removed)
			    	//console.log(array_added)
				    
				    console.log(make_array)
				console.log(final_old_array)
				console.log(array_removed)
				
				
				
				
				  
			      $('#estimate_pop_curr').html("Estimated Population (2018): " + countyDataCurr['pop_est'].toString().replace(/\B(?=(\d{3})+(?!\d))/g, ","))
			      $('#african_curr_num').text((((african_ratio_current.reduce((a, b) => a + b, 0)/ district_people_current.reduce((a, b) => a + b, 0)))*100).toFixed(2) + "%")
			      $('#asian_curr_num').text((((asian_ratio_current.reduce((a, b) => a + b, 0)/ district_people_current.reduce((a, b) => a + b, 0)))*100).toFixed(2) + "%")
			      $('#hispanic_curr_num').text((((hispanic_ratio_current.reduce((a, b) => a + b, 0)/ district_people_current.reduce((a, b) => a + b, 0)))*100).toFixed(2) + "%")
			      $('#ai_curr_num').text((((ai_ratio_current.reduce((a, b) => a + b, 0)/ district_people_current.reduce((a, b) => a + b, 0)))*100).toFixed(2) + "%")
			      $('#other_curr_num').text((((other_ratio_current.reduce((a, b) => a + b, 0)/ district_people_current.reduce((a, b) => a + b, 0)))*100).toFixed(2) + "%")
			      $('#haw_curr_num').text((((haw_ratio_current.reduce((a, b) => a + b, 0)/ district_people_current.reduce((a, b) => a + b, 0)))*100).toFixed(2) + "%")
			      $('#white_curr_num').text((((white_ratio_current.reduce((a, b) => a + b, 0)/ district_people_current.reduce((a, b) => a + b, 0)))*100).toFixed(2) + "%")
			      $('#old_target').text("District Target Population: 212,000")
			      $('#new_target').text("District Target Population: 219,797")
			      //$('#white_curr_num').text(new_district_data[file_name]['white'] + "%")
			      //$('#african_curr_num').text(new_district_data[file_name]['african'] + "%")
			      //$('#asian_curr_num').text(new_district_data[file_name]['asian'] + "%")
			      //$('#hispanic_curr_num').text(new_district_data[file_name]['hispanic'] + "%")
			      //$('#democratic_curr_num').text((((dem_ratio_current.reduce((a, b) => a + b, 0)/ district_people_current.reduce((a, b) => a + b, 0)))*100).toFixed(2) + "%")
			      //$('#republican_curr_num').text((((rep_ratio_current.reduce((a, b) => a + b, 0)/ district_people_current.reduce((a, b) => a + b, 0)))*100).toFixed(2) + "%")
			      $('#population_curr_num').html("Total Population: " + (district_people_current.reduce((a, b) => a + b, 0)).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ","))
			      $('#district_estimate_pop_curr').html("Estimated Total Population (2018): " + (district_people_estimate_current.reduce((a, b) => a + b, 0)).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ","))
			      //$('#population_curr_num').html("District Demographics: " + District_Population_2010[file_name]['Population'].toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",") + " Population")
			      $('#voters_curr_num').text("Registered Voters: " + (district_voters_current.reduce((a, b) => a + b, 0)).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ","))
			      $('#added').html("<br>" + (array_added).join(', '))
			      $('#removed').html("<br>" + (array_removed).join(', '))
			      $('#deviation_curr_num').text("Deviation: " + dev_curr.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ","))	
			      $('#deviation_old').text("Deviation: " + dev.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ","))
			      //}, 20000);
				  
	                    $('#voters_curr').text("Registered Voters: " + countyDataCurr['voters'].toString().replace(/\B(?=(\d{3})+(?!\d))/g, ","))
	                    //$('#democratic_curr').text(data_from_2010['democratic'] + "%")
	                    //$('#republican_curr').text(data_from_2010['republican'] + "%")
	                    $('#population_curr').text("Population: " + countyDataCurr['population'].toString().replace(/\B(?=(\d{3})+(?!\d))/g, ","))
	                    $('#african_curr').text(countyDataCurr['af'] + "%")
	                    $('#asian_curr').text(countyDataCurr['a'] + "%")
	                    $('#hispanic_curr').text(countyDataCurr['his'] + "%")
			    $('#ai_curr').text(countyDataCurr['ai'] + "%")
			    $('#white_curr').text(countyDataCurr['white'] + "%")
			    $('#haw_curr').text(countyDataCurr['haw'] + "%")
			    $('#other_curr').text(countyDataCurr['other'] + "%")
	                    //$('#taxable_curr').text("Per Capital Taxable Property Value: $" + data_from_2010['taxable'])
			    $('#current_district_number_top').html(new_index.toString())
			    $('#senator_curr').html(Current_Legislators[currentHighlight_new.toString()]['Senator'])
		            $('#member1_curr').html("&emsp;&emsp;&emsp;" + (Current_Legislators[currentHighlight_new.toString()]['Member1']))
			    $('#member2_curr').html((Current_Legislators[currentHighlight_new.toString()]['Member2']) + "&emsp;&emsp;&emsp;")
	                }
	
	                $('#previous_district_number').text("Legislative District " + old_index.toString())
	                $('#current_district_number').text("Legislative District " + new_index.toString())
			$('#previous_district_number_bottom').text("Legislative District " + old_index.toString())
	                $('#current_district_number_bottom').text("Legislative District " + new_index.toString())
	
	                map_prev.setPaintProperty('route-fills-' + old_index.toString(), 'fill-opacity', 0.5);
	                map_curr.setPaintProperty('route-fills-' + new_index.toString(), 'fill-opacity', 0.5);
	            }
	        }
		//}
	
	
	    $.getJSON("data/NJ_Legislative.geojson", function(json) {
	        LegislativeDataCurrent = json
	    });
	
	    $.getJSON("data/NJ_Legislative_Old.geojson", function(json) {
	        LegislativeDataPast = json
	    });
	
	    for(var i = 1; i <= old_n; i++) {
	        $.getJSON("data/NJ_Legislative_Old/District_" + i.toString() + ".geojson", function(json_old) {
	            var id = json_old["features"][0]["properties"]["ID"]
	            LegislativeDataPast_Districts[id] = json_old
	            var coordinates = json_old["features"][0]["geometry"]["coordinates"]
	            var polygons_group = []
	            if(coordinates.length == 1 || id == "31") {
	                polygons_group.push( turf.polygon( coordinates, { name: 'poly1'} ))
	                polygons_old[parseInt(id)] = polygons_group
	            }
	            else {
	
	                for(var k = 0; k < coordinates.length; k++) {
	                    polygons_group.push( turf.polygon( coordinates[k], { name: 'poly1'} ) )
	                }
	                polygons_old[parseInt(id)] = polygons_group
	                
	            }
	        });
	    }
	
	    
	    for(var j = 1; j <= new_n; j++) {
	        $.getJSON("data/NJ_Legislative/District_" + j.toString() + ".geojson", function(json_new) {
	            var object_id = json_new["features"][0]["properties"]["OBJECTID"]
	            LegislativeDataCurrent_Districts[object_id.toString()] = json_new
	            var coordinatesNew = json_new["features"][0]["geometry"]["coordinates"]
	            var polygons_group = []
	            
	            if(coordinatesNew.length == 1 || object_id == "34") {
	                polygons_group.push( turf.polygon( coordinatesNew, { name: 'poly1'} ))
	                polygons_new[object_id] = polygons_group
	            }
	            else {
	
	                for(var l = 0; l < coordinatesNew.length; l++) {
	                    polygons_group.push( turf.polygon( coordinatesNew[l], { name: 'poly1'} ) )
	                }
	                polygons_new[object_id] = polygons_group
	                
	            }
	        });
	    } 
	
		
	    
	    mapboxgl.accessToken = 'pk.eyJ1IjoiZnVlcnphc3RyYXRlZ3lncm91cCIsImEiOiJjanoycWJqcHkwNnA4M2pudHFmdnJ5bXZlIn0.eaNrVgK5M7eLrCmi_hGX1A';
	
	    map_origin = [-74.53734351262877, 40.137451890638886]
	    map_scale = 6.3
	
	
	    var map_prev = new mapboxgl.Map({
	        container: 'map_prev',
	        style: 'mapbox://styles/mapbox/streets-v11',
	        center: map_origin,
	        zoom: map_scale
	    });
		
	
	    map_prev.on('load', function () {
	
	        map_prev.addSource('route', {
	          type: 'geojson',
	          data: LegislativeDataPast
	        });
	
	
	        for(var i = 1; i <= old_n; i++) {
	            i_str = i.toString()
	            map_prev.addSource('route_old_' + i_str, {
	              type: 'geojson',
	              data: LegislativeDataPast_Districts[i_str]
	            });
	
	        }
	        
	
	        map_prev.addLayer({
	            "id": "route",
	            "type": "line",
	            "source": "route",
	            "sourcelayer": "route-layer",
	            "layout": {
	                "line-join": "round",
	                "line-cap": "round"
	            },
	            "paint": {
	                "line-color": "#888",
	                "line-width": 1
	            }
	        });
	
	        for(var i = 1; i <= old_n; i++) {
	            map_prev.addLayer({
	                "id": "route-fills-" + i.toString(),
	                "type": "fill",
	                "source": "route_old_" + i.toString(),
	                "layout": {},
	                "paint": {
	                    "fill-color": "#627BC1",
	                    "fill-opacity": 0.15
	                }
	            });
	
	        }
	
	
	
	
	    });
	
	
	    var map_curr = new mapboxgl.Map({
	        container: 'map_curr',
	        style: 'mapbox://styles/mapbox/streets-v11',
	        center: map_origin,
	        zoom: map_scale
	    });
	
	    map_curr.on('load', function () {
	
	        map_curr.addSource('route', {
	          type: 'geojson',
	          data: LegislativeDataCurrent
	        });
	
	        
	        for(var j = 1; j <= new_n; j++) {
	            j_str = j.toString()
	            map_curr.addSource('route_new_' + j_str, {
	              type: 'geojson',
	              data: LegislativeDataCurrent_Districts[j_str]
	            });
	
	        }
	        
	
	        map_curr.addLayer({
	            "id": "route",
	            "type": "line",
	            "source": "route",
	            "layout": {
	                "line-join": "round",
	                "line-cap": "round"
	            },
	            "paint": {
	                "line-color": "#888",
	                "line-width": 1
	            }
	        });
	
	        
	        for(var j = 1; j <= new_n; j++) {
	            map_curr.addLayer({
	                "id": "route-fills-" + j.toString(),
	                "type": "fill",
	                "source": "route_new_" + j.toString(),
	                "layout": {},
	                "paint": {
	                    "fill-color": "#627BC1",
	                    "fill-opacity": 0.15
	                }
	            });
	
	        } 
	
	    });
	
	
	
	    //------------------ Align Maps To Same Centers/Zoom -----------------//
	
	    var disable = false;
	  
	  map_prev.on('move', function () {
	        if (!disable) {
	            map_origin = map_prev.getCenter()
	            map_scale = map_prev.getZoom()
	            disable = true;
	            map_curr.setCenter(map_origin)
	            map_curr.setZoom(map_scale)
	            disable = false;
	        }
	    })
	    
	    map_prev.on('zoom', function () {
	        if (!disable) {
	            map_origin = map_prev.getCenter()
	            map_scale = map_prev.getZoom()
	            disable = true;
	            //map_curr.setCenter(map_origin)
	            //map_curr.setZoom(map_scale)
	            //disable = false;
	        }
	    })
	
	    map_curr.on('move', function () {
	        if (!disable) {
	            map_origin = map_curr.getCenter()
	            map_scale = map_curr.getZoom()
	            disable = true;
	            map_prev.setCenter(map_origin)
	            map_prev.setZoom(map_scale)
	            disable = false;
	        }
	    })
	
	    map_curr.on('zoom', function () {
	        if (!disable) {
	            map_origin = map_curr.getCenter()
	            map_scale = map_curr.getZoom()
	            disable = true;
	            //map_prev.setCenter(map_origin)
	            //map_prev.setZoom(map_scale)
	            //disable = false;
	        }
	    }) 
		
		map_prev.addControl(new mapboxgl.NavigationControl());
		map_curr.addControl(new mapboxgl.NavigationControl());	
	
	</script>

	</body>
	</html>

