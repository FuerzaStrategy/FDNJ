<!DOCTYPE html>
	<html>
	<head>
	    <meta charset='utf-8' />
	    <title>GeoJSON Test</title>
	    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
	    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	    <script src='https://npmcdn.com/@turf/turf/turf.min.js'></script>
	    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v1.0.0/mapbox-gl.js'></script>
	    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v1.0.0/mapbox-gl.css' rel='stylesheet' />
	    <style>
	
	        :root {
	            --top-push: 50px;
	            --view-width: calc(50% - 10px);
	            --view-height: 500px;
	        }
	
	        body { 
	            margin: 0; 
	            padding: 0; 
	            font-family: Arial, 'sans-serif';
	            overflow-x: hidden;
		    background-image: url("./data/Background-tool.png");
		    background-repeat: no-repeat;
		    background-attachment: fixed;
		    background-position: center;
		    background-size: 100% 111%;
	        }
	
	        .map {
	            margin-top: 230px;
	            padding: 0;
	            width: var(--view-width);
	            height: var(--view-height);
	            display: inline-block;
	        }
	
	        #previous_header {
	            margin-top: 0;
	            margin-left: 5%;
	            display: inline-block;
	            float: left;
	            width: calc(var(--view-width) - 5%);
	            text-align: center;
	            font-weight: bold;
	            color: white;
	            line-height: 50px;
	            font-size: 24px;
	        }
	
	
	        #current_header {
	            margin-top: 0;
	            margin-right: 5%;
	            display: inline-block;
	            float: right;
	            width: calc(var(--view-width) - 5%);
	            text-align: center;
	            font-weight: bold;
	            color: white;
	            line-height: 50px;
	            font-size: 24px;
	        }
	
	        .form {
	            width: 90%;
	            margin-left: 5%;
	            margin-top: 15px;
	            margin-bottom: 15px;
			
	        }
	
	        .zipInput {
	            border: 0;
	            border-bottom: 1px solid black;
	            outline: 0;
	            width: 400px;
	            font-size: 18px;
	        }
	
	        .zipSubmit {
	            background: #87859f;
	            font-size: 15px;
	            color: white;
	            padding: 5px 10px 5px 10px;
	        }
	
	        .zipSubmit:hover {
	            cursor: pointer;
	            background: #7d7b94;
	        }
	
	        #errorMessage {
	            font-size: 18px;
	            padding-left: 5%;
	            margin-bottom: 15px;
	            line-height: 18px;
	            height:18px;
	            width:100%;
	        }
	
	        #map_curr {
	            float: right;
	        }
	
	        #map_prev {
	            float: left;
	        }
	
	        .maps {
	            width: 90%;
	            margin-left: 5%;
	        }
	
	        #previous_district_number {
	            display: inline-block;
	            width: 49%;
	            text-align: center;
	            margin-top: 0;
			
		    font-size: 22px;
	        }
	
	        #current_district_number {
	            display: inline-block;
	            width: 49%;
	            text-align: center;
	            margin-top: 0;
		    font-size: 22px;
	        }
	
	        .map_prev_info {
	            margin-left: 5%;
	            width: calc(var(--view-width) - 5%);
	            text-align: center;
	            float: left;
	            display: inline-block;
	            background: #384369;
	        }
	
	        .map_curr_info {
	            margin-right: 5%;
	            display: inline-block;
	            float: right;
	            width: calc(var(--view-width) - 5%);
	            text-align: center;
	            display: inline-block;
	            background: #fce2aa;
	        }
	
	        .info_title {
	            font-weight: bold;
	        }
                 
         #table_black {
             border-style: solid black; 
             background: black; 
             margin-left: 5%; 
             margin-right: 5%; 
             border-radius: 15px; 
             height: 380px; 
             padding: 10px;
             color: white;
         }
	
 	#table_black_Legislator {
             border-style: solid black; 
             background: black; 
             margin-left: -10%; 
	     margin-right: -10%;
	     border-radius: 15px;
             height: 240px; 
             padding-top: 0px;
	     padding-right: 50px;
	     padding-bottom: 50px;
	     padding-left: 50px;
             color: white;
         }
	        
         #table_white {
             border-style: solid white; 
             background: white; 
             margin-left: 5%; 
             margin-right: 5%; 
             border-radius: 15px; 
             height: 420px; 
             padding: 10px;
             color: black;
         }
         #table_gray {
            border-style:solid #c3c3c1; 
            background:#c3c3c1; 
            margin-left:5%; 
            margin-right:5%; 
            border-radius:15px; 
            height:500px; 
            padding:10px;'
         }    
         #newsearch {
            box-sizing: content-box; 
            position: relative;
            margin: auto;
            border-radius: 15px; 
            width: 50%;
            height: 50px;
            padding: 30px;
            border: 1px solid black;
            background: black;
            color: white;
        }
        #blue_top {
            border-style:solid #384369; 
            background:#384369;   
            height:70px; 
            padding:10px;
	    padding-top:0px;
            text-align: center;
            color: white;
            font: arial;
         }          
         #yellow_top {
            border-style:solid #fce2aa; 
            background:#fce2aa;   
            height:70px; 
            padding:10px;
            padding-top:0px;
            text-align: center;
            font: arial;
         }
          #blue_top_first {
            border-style:solid #384369; 
            background:#384369;   
            height:70px; 
            padding:10px;
            text-align: center;
            color: white;
            font: arial;
         }
	  #yellow_top_first {
            border-style:solid #fce2aa; 
            background:#fce2aa;   
            height:70px; 
            padding:10px;
            text-align: center;
            font: arial;
         }
	    </style>
	</head>
	<body>
	

	<div id='main_field'>
	    <form class='form' align="center" name="myform" action="javascript:handleIt(zip.value)">
         <div id="newsearch" align="center" style="color:#fce2aa;">View changes to your Legislative District         
	     
		<input class='zipInput' name="zip" id="zip" type="text" placeholder="Enter your address here" style="background-color:#c3c3c1;" required/>
	        <input class='zipSubmit' name="Submit"  type="submit" value="Search"/>
		
	    </form>
	    <div id='errorMessage'></div>
            <br>
            
            <div id='table_black_Legislator'>
	      <h2>Your Current District: <p id='current_district_number_top' style="display: inline-block;">##</p></h2>
	      <p style="font-size: 20px"><i>Your Current Legislators</i></p>
              <center>
              <table style='border: 1px solid white;border-collapse: collapse;width:100%; text-align:center;'>
	            <tr style='border: 1px solid white;'>
	            <td style='border: 1px solid white;'><p>Senator</p></td>
	            <td style='border: 1px solid white;'><p>Members of Assembly</p></td>
              </tr>
              <tr style='border: 1px solid white;'>
              <td style='border: 1px solid white;'><p id='senator_curr'></p></td>
	      <td style='border: 1px solid white;'><p id='member1_curr' style="float:left"> </p><p id='member2_curr' style="float:right"></p></td>
	     
              </tr>
              </table>
              </center>
             </div>
      </div>
		<br>
		<br>
		<br>

	    <div style='width: 100%; height: 50px;'></div>
	    <div class='maps'>
	        <div class='map' id='map_prev'><div id='blue_top_first'><h1>2001 –2010 District Map</h1><p id='previous_district_number'>  </p></div></div>
	        <div class='map' id='map_curr'><div id='yellow_top_first'><h1>2011 –2020 District Map</h1><p id='current_district_number'>  </p></div></div>
	    </div>
	    <div>
	        <div class='map_prev_info'>
			<div id='blue_top'><h1>2001 –2010 District Map</h1><p id='previous_district_number_bottom'>  </p></div>	
	            <p id='city_prev' style='border-style:solid #c3c3c1; background:#c3c3c1; margin-left:5%; margin-right:5%; border-radius:15px; height:20px; padding:10px;'><i>Your Town:</i></p>
      <p id='other_city_prev' style='border-style:solid #c3c3c1; background:#c3c3c1; margin-left:5%; margin-right:5%; border-radius:15px; height:500px; padding:10px;'><u><b>Other Towns in Your District</b></u></p><!--NEW-->
	            <!--<p class='info_title'>Voters</p>-->
           <div id='table_black'>
              <p style="margin-bottom:0px"><u><b>Town Demographics</b></u></p>
	      <p style="margin-top:0px;margin-bottom:0px"><font size="1.5">*based on 2000 Census</font size></p>
	      <p id='population_prev' style="margin-top:0px;margin-bottom:0px">Population: ##,###</p>
	      <p id='voters_prev' style="margin-top:0px">Registered Voters: ##,###</p>
	      <br><br>
              <center>
              <table style='border: 1px solid white;border-collapse: collapse;width:100%; text-align:center;'>
		       <!--<colgroup>
			    <col style="width: 33%" />
			    <col style="width: 33%" />
			    <col style="width: 33%" />
		       </colgroup>-->
              <tr style='border: 1px solid white;'>
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid white;'><p>White</p></td>
	            <td width="14.285714285714285714285714285714%" style='border: 1px solid white;'><p>Black or African American</p></td>
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid white;'><p>American Indian and Alaskan Native</p></td>
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid white;'><p>Asian</p></td>
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid white;'><p>Native Hawaiian and Other Pacific Islander</p></td>
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid white;'><p>Some Other Race</p></td>
	            <td width="14.285714285714285714285714285714%" style='border: 1px solid white;'><p>Hispanic or Latino</p></td>
              </tr>
              <tr style='border: 1px solid white;'>
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid white;'><p id='white_prev'>##%</p></td>
              	    <td width="14.285714285714285714285714285714%" style='border: 1px solid white;'><p id='african_prev'>##%</p></td>
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid white;'><p id='ai_prev'>##%</p></td>
	            <td width="14.285714285714285714285714285714%" style='border: 1px solid white;'><p id='asian_prev'>##%</p></td>
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid white;'><p id='haw_prev'>##%</p></td>
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid white;'><p id='other_prev'>##%</p></td>
	            <td width="14.285714285714285714285714285714%" style='border: 1px solid white;'><p id='hispanic_prev'>##%</p></td>
              </tr>
              </table>
              </center>
	      <p align="center";><font size="1.5">*Percentages do not add up to 100% since voters may identify in multiple groups.</font size></p>
           </div>
           <br>
          <div id='table_white'><!--NEW-->
              <p style="margin-bottom:0px"><u><b>District Demographics</b></u></p>
              <p id='population_prev_num' style="margin-top:0px;margin-bottom:0px">Total Population: ##,###</p>
	      <p id='voters_prev_num' style="margin-top:0px">Registered Voters: ##,###</p>
	      <p id='old_target' style="margin-bottom:0px">District Target Population: ##,###</p>
	      <P id='deviation_old' style="margin-top:0px; margin-bottom:0px">Deviation: ##,###</P>
	      <br><br><br>
              <center>
              <table style='border: 1px solid black;border-collapse: collapse;table-layout: auto;width:100%; text-align:center;'>
		       <!--<colgroup>
			    <col style="width: 33%" />
			    <col style="width: 33%" />
			    <col style="width: 33%" />
		       </colgroup>-->
              <tr style='border: 1px solid black;'>
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid black;'><p>White</p></td>
	            <td width="14.285714285714285714285714285714%" style='border: 1px solid black;'><p>Black or African American</p></td>
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid black;'><p>American Indian and Alaskan Native</p></td>
	            <td width="14.285714285714285714285714285714%" style='border: 1px solid black;'><p>Asian</p></td>
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid black;'><p>Native Hawaiian and Other Pacific Islander</p></td>
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid black;'><p>Some Other Race</p></td>
	            <td width="14.285714285714285714285714285714%" style='border: 1px solid black;'><p>Hispanic or Latino</p></td>
              </tr>
              <tr style='border: 1px solid black;'>
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid black;'><p id='white_num'>##%</p></td>
              	    <td width="14.285714285714285714285714285714%" style='border: 1px solid black;'><p id='african_num'>##%</p></td>
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid black;'><p id='ai_num'>##%</p></td>
	            <td width="14.285714285714285714285714285714%" style='border: 1px solid black;'><p id='asian_num'>##%</p></td>
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid black;'><p id='haw_num'>##%</p></td>
		    <td width="14.285714285714285714285714285714%"style='border: 1px solid black;'><p id='other_num'>##%</p></td>
	            <td width="14.285714285714285714285714285714%" style='border: 1px solid black;'><p id='hispanic_num'>##%</p></td>
              </tr>
              </table>
              </center>
	      <p align="center";><font size="1.5">*Percentages do not add up to 100% since voters may identify in multiple groups.</font size></p>
           </div>
	    <div>
            <!--<p style='border-style:solid white; background:#384369; margin-left:5%; margin-right:5%; border-radius:15px; height: 170px; padding:10px;'></p>-->
            </div>
           <br>
	   <!--<div id='table_black'>
              <p id='voters_prev'>###,### Registered Voters (Town)</p>
              <center>
              <table style='border: 1px solid white;border-collapse: collapse;width:100%; text-align:center;'>
	            <tr style='border: 1px solid white;'>
              <td style='border: 1px solid white;'><p>Democratics</p></td>
	            <td style='border: 1px solid white;'><p>Republicans</p></td>
              </tr>
              <tr style='border: 1px solid white;'>
              <td style='border: 1px solid white;'><p id='democratic_prev'>###,###</p></td>
	            <td style='border: 1px solid white;'><p id='republican_prev'>###,###</p></td>
              </tr>
              </table>
              </center>
           </div>
           <br>
           <div id='table_white'>
              <p id='voters_prev_num'>###,### Registered Voters (District)</p>
              <center>
              <table style='border: 1px solid black;border-collapse: collapse;width:100%; text-align:center;'>
	            <tr style='border: 1px solid black;'>
              <td style='border: 1px solid black;'><p>Democratics</p></td>
	            <td style='border: 1px solid black;'><p>Republicans</p></td>
              </tr>
              <tr style='border: 1px solid black;'>
              <td style='border: 1px solid black;'><p id='democratic_num'>###,###</p></td>
	            <td style='border: 1px solid black;'><p id='republican_num'>###,###</p></td>
              </tr>
              </table>
              </center>
           </div>-->
           <br>
	            <!--<p class='info_title'>Fiscal</p>
	            <p id='taxable_prev'>Per Capital Taxable Property Value:</p>-->
	      </div>
	      <div class='map_curr_info'>
	      <div id='yellow_top'><h1>2011 –2020 District Map</h1><p id='current_district_number_bottom'>  </p></div>
	      <p id='city_curr'style='border-style:solid #c3c3c1; background:#c3c3c1; margin-left:5%; margin-right:5%; border-radius:15px; height:20px; padding:10px;'><i>Your Town:</i></p>
              <div id='table_gray'><!--NEW-->
              <!--<center>--> 
	      <p id='other_city_curr' style="margin-top:0px"><u><b>Other Towns in Your District</b></u></p><br>
		      
              <table style='border-right: 1px solid black;border: 1px solid #c3c3c1;border-collapse: collapse;width:100%; text-align:center;'>
              <tr>
	      <td style='width:50%'><i>Towns Added</i></td>
	      <td><i>Towns Removed</i></td>
              </tr>
              </table>
	      <table style='border: 1px solid #c3c3c1;border-collapse: collapse;width:100%; text-align:center;'>
              <tr>
              <td id="added" style='width:50%;border-right: 1px solid black;color:green'><br></td>
              <td id="removed" style='color:red'></td>
              </tr>
              </table>
              <!--</center>-->
             </div>
              <br>
	            <!--<p class='info_title'>Voters</p>-->
	            <!--<p class='info_title'>Census</p>-->
             <div id='table_black'>
		    <p style="margin-bottom:0px"><u><b>Town Demographics</b></u></p>
		    <p style="margin-top:0px;margin-bottom:0px"><font size="1.5">*based on 2010 Census</font size></p>
	            <p id='population_curr' style="margin-top:0px;margin-bottom:0px">Population: ##,###</p>
		    <p id='voters_curr' style="margin-top:0px;margin-bottom:0px">Registered Voters: ##,###</p><br>
		    <p id='estimate_pop_curr' style="margin-top:0px">Estimated Population(2018): ##,###</P>
              <center>
              <table style='border: 1px solid white;border-collapse: collapse;width:100%; text-align:center;'>
		      <!--<colgroup>
			    <col style="width: 33%" />
			    <col style="width: 33%" />
			    <col style="width: 33%" />
		       </colgroup>-->
              <tr style='border: 1px solid white;'>
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid white;'><p>White</p></td>
	            <td width="14.285714285714285714285714285714%" style='border: 1px solid white;'><p>Black or African American</p></td>
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid white;'><p>American Indian and Alaskan Native</p></td>
	            <td width="14.285714285714285714285714285714%" style='border: 1px solid white;'><p>Asian</p></td>
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid white;'><p>Native Hawaiian and Other Pacific Islander</p></td>
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid white;'><p>Some Other Race</p></td>
	            <td width="14.285714285714285714285714285714%" style='border: 1px solid white;'><p>Hispanic or Latino</p></td>
              </tr>
              <tr style='border: 1px solid white;'>
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid white;'><p id='white_curr'>##%</p></td>
	            <td width="14.285714285714285714285714285714%" style='border: 1px solid white;'><p id='african_curr'>##%</p></td>
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid white;'><p id='ai_curr'>##%</p></td>
	            <td width="14.285714285714285714285714285714%" style='border: 1px solid white;'><p id='asian_curr'>##%</p></td>
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid white;'><p id='haw_curr'>##%</p></td>
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid white;'><p id='other_curr'>##%</p></td>
	            <td width="14.285714285714285714285714285714%" style='border: 1px solid white;'><p id='hispanic_curr'>##%</p></td>
	            </tr>
              </table>
              </center>
	      <p align="center";><font size="1.5">*Percentages do not add up to 100% since voters may identify in multiple groups.</font size></p>
              </div>
              <br>
              <div id='table_white'><!--NEW-->
		    <p style="margin-bottom:0px"><u><b>District Demographics</b></u></p>
	            <p id='population_curr_num' style="margin-top:0px;margin-bottom:0px">Total Population: ##,###</p>
		    <p id='voters_curr_num' style="margin-top:0px;margin-bottom:0px">Registered Voters: ##,###</p><br>  
		    <p id='district_estimate_pop_curr' style="margin-top:0px;">Estimated Total Population (2018): ##,###</p>
		    <p id='new_target' style="margin-top:0px; margin-bottom:0px">District Target Population: ##,###</p>
		    <P id='deviation_curr_num' style="margin-top:0px">Deviation: ##,###</P>
              <center>
              <table style='border: 1px solid black;border-collapse: collapse; text-align:center;table-layout: auto;width: 100%;'>
		       <!--<colgroup>
			    <col style="width: 33%" />
			    <col style="width: 33%" />
			    <col style="width: 33%" />
		       </colgroup>-->
              <tr>
		    <!--<td style='border: 1px solid black;'><p>Deviation</p></td>-->
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid black;'><p>White</p></td>
	            <td width="14.285714285714285714285714285714%" style='border: 1px solid black;'><p>Black or African American</p></td>
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid black;'><p>American Indian and Alaskan Native</p></td>
	            <td width="14.285714285714285714285714285714%" style='border: 1px solid black;'><p>Asian</p></td>
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid black;'><p>Native Hawaiian and Other Pacific Islander</p></td>
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid black;'><p>Some Other Race</p></td>
	            <td width="14.285714285714285714285714285714%" style='border: 1px solid black;'><p>Hispanic or Latino</p></td>
              </tr>
              <tr>
		    <!--<td style='border: 1px solid black;'><p id='deviation_curr_num'>##</p></td>-->
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid black;'><p id='white_curr_num'>##%</p></td>
	            <td width="14.285714285714285714285714285714%" style='border: 1px solid black;'><p id='african_curr_num'>##%</p></td>
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid black;'><p id='ai_curr_num'>##%</p></td>
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid black;'><p id='asian_curr_num'>##%</p></td>
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid black;'><p id='haw_curr_num'>##%</p></td>
		    <td width="14.285714285714285714285714285714%" style='border: 1px solid black;'><p id='other_curr_num'>##%</p></td>
	            <td width="14.285714285714285714285714285714%" style='border: 1px solid black;'><p id='hispanic_curr_num'>##%</p></td>
	            </tr>
              </table>
              </center>
	      <p align="center";><font size="1.5">*Percentages do not add up to 100% since voters may identify in multiple groups.</font size></p>
              </div>
              <br>
	      <!--<div id='table_black_Legislator'>
	      <p>Your Current Legislators</p>
              <center>
              <table style='border: 1px solid white;border-collapse: collapse;width:100%; text-align:center;'>
	            <tr style='border: 1px solid white;'>
	            <td style='border: 1px solid white;'><p>Senator</p></td>
	            <td style='border: 1px solid white;'><p>Members of Assembly</p></td>
              </tr>
              <tr style='border: 1px solid white;'>
              <td style='border: 1px solid white;'><p id='senator_curr'></p></td>
	      <td style='border: 1px solid white;'><p id='member1_curr' style="float:left"> </p><p id='member2_curr' style="float:right"></p></td>
	     
              </tr>
              </table>
              </center>
             </div>-->
	      <!--<div id='table_black'>
	            <p id='voters_curr'>###,### Registered Voters (Town)</p>
              <center>
              <table style='border: 1px solid white;border-collapse: collapse;width:100%; text-align:center;'>
	            <tr style='border: 1px solid white;'>
	            <td style='border: 1px solid white;'><p>Democratics</p></td>
	            <td style='border: 1px solid white;'><p>Republicans</p></td>
              </tr>
              <tr style='border: 1px solid white;'>
              <td style='border: 1px solid white;'><p id='democratic_curr'>###,###</p></td>
	            <td style='border: 1px solid white;'><p id='republican_curr'>###,###</p></td>
              </tr>
              </table>
              </center>
             </div>
             <br>
             <div id='table_white'>
	            <p id='voters_curr_num'>###,### Registered Voters (District)</p>
              <center>
              <table style='border: 1px solid black;border-collapse: collapse;width:100%; text-align:center;'>
	            <tr style='border: 1px solid black;'>
	            <td style='border: 1px solid black;'><p>Democratics</p></td>
	            <td style='border: 1px solid black;'><p>Republicans</p></td>
              </tr>
              <tr style='border: 1px solid black;'>
              <td style='border: 1px solid black;'><p id='democratic_curr_num'>###,###</p></td>
	            <td style='border: 1px solid black;'><p id='republican_curr_num'>###,###</p></td>
              </tr>
              </table>
              </center>
             </div>-->
             <br>
              <!--<p class='info_title'>Fiscal</p>
	            <p id='taxable_curr'>Per Capital Taxable Property Value:</p>-->
	        </div>
	    </div>		
</div>
	

	

	<script>

	    var municipality_file = {}
	    var numberOfTowns = 565;
	    var TRY_polygons_old = Array(numberOfTowns).fill(0)
	    var TRY_polygons_new = Array(numberOfTowns).fill(0)
	    var ZtC = {}
	    var ZtName = {}
	    var data_2000 = {}
	    var data_2010 = {}
	    var NJ_Zip = []
	    var LegislativeDataCurrent = {}
	    var LegislativeDataPast = {}
	    var Current_Legislators = {}
	    var old_n = 40;
	    var new_n = 40;
	    var LegislativeDataPast_Districts = {}
	    var LegislativeDataCurrent_Districts = {}
	    var currentHighlight_old = 0
	    var currentHighlight_new = 0
	    var polygons_old = Array(old_n).fill(0)
	    var polygons_new = Array(new_n).fill(0)
	    var racedata2000 = {}
	    var racedata2010 = {}
	    var currCountyData = {}
	    var AllData = {}
	    var new_district_data = {}
	    var distict_new_files = {}
	    var distict_old_files = {}
	    var District_Population_2010 = {}
	    
	    var currGloucesterData = {}
	    var currAtlanticData = {}
	    var currBergenData = {}
	    var currBurlingtonData = {}
	    var currCamdenData = {}
	    var currCapeMayData = {}
	    var currCumberlandData = {}
	    var currEssexData = {}
	    var currHudsonData = {}
	    var currMercerData = {}
	    var currMiddlesexData = {}
	    var currMonmouthData = {}
	    var currMorrisData = {}
	    var currOceanData = {}
	    var currPassaicData = {}
	    var currSalemData = {}
	    var currSomersetData = {}
	    var currSussexData = {}
	    var currUnionData = {}
	    var currWarrenData = {}
	    
	    var oldAtlanticData = {}
	    var oldBergenData = {}
	    var oldBurlingtonData = {}
	    var oldCamdenData = {}
	    var oldCapeMayData = {}
	    var oldCumberlandData = {}
	    var oldEssexData = {}
	    var oldGloucesterData = {}
	    var oldHudsonData = {}
	    var oldMercerData = {}
	    var oldMiddlesexData = {}
	    var oldMonmouthData = {}
	    var oldMorrisData = {}
	    var oldOceanData = {}
	    var oldPassaicData = {}
	    var oldSalemData = {}
	    var oldSomersetData = {}
	    var oldSussexData = {}
	    var oldUnionData = {}
	    var oldWarrenData = {}
	    
	    $.getJSON("data/NJ_Municipalities.geojson", function(data) {
	        municipality_file = data
	    })
	
	    $.getJSON("data/zip_to_coordinate.json", function(data) {
	        ZtC = data
	    })
	
	    $.getJSON("data/nj_zip_codes_to_towns.json", function(data) {
	        ZtName = data
	    })
	
	    $.getJSON("data/2000_data.json", function(data) {
	        data_2010 = data
	    })
	
	    $.getJSON("data/2010_data.json", function(data) {
	        data_2000 = data
	    })
	
	    $.getJSON("data/nj_zip_codes.json", function(data) {
	        NJ_Zip = data["zips"]
	    })
	
	    $.getJSON("data/2010_data_districts.json", function(data) { 
		new_district_data = data
	    })
	    
	   $.getJSON("data/2000_data_districts.json", function(data) { 
		old_district_data = data
	    })
  	   $.getJSON("data/Current_Legislators.json", function(data) {
	        Current_Legislators = data
	    })
	   $.getJSON("data/race_data_2000.json", function(data) {
	        racedata2000 = data
	    })
	   $.getJSON("data/2010_race_data.json", function(data) {
	        racedata2010 = data
	    })
	   $.getJSON("data/district_new_files.json", function(data) {
	        district_new_files = data
	    })
	   $.getJSON("data/district_old_files.json", function(data) {
	        district_old_files = data
	    })
           $.getJSON("data/2010_District_Population.json", function(data) {
	        District_Population_2010 = data
	    })
	    
	 $.getJSON("data.json", function(data) {
	        AllData = data
	    })
	$.getJSON("data/Curr_County/Atlantic County.json", function(data) {
	        currAtlanticData = data
	    })
	$.getJSON("data/Curr_County/Bergen County.json", function(data) {
	        currBergenData = data
	    })
	$.getJSON("data/Curr_County/Burlington County.json", function(data) {
	        currBurlingtonData = data
	    })
	$.getJSON("data/Curr_County/Camden County.json", function(data) {
	        currCamdenData = data
	    })
	$.getJSON("data/Curr_County/Cape May County.json", function(data) {
	        currCapeMayData = data
	    })
	$.getJSON("data/Curr_County/Cumberland County.json", function(data) {
	        currCumberlandData = data
	    })
	$.getJSON("data/Curr_County/Essex County.json", function(data) {
	        currEssexData = data
	    })
	$.getJSON("data/Curr_County/Gloucester County.json", function(data) {
	        currGloucesterData = data
	    })
	$.getJSON("data/Curr_County/Hudson County.json", function(data) {
	        currHudsonData = data
	    })
	$.getJSON("data/Curr_County/Hunterdon County.json", function(data) {
	        currHunterdonData = data
	    })
	$.getJSON("data/Curr_County/Mercer County.json", function(data) {
	        currMercerData = data
	    })
	$.getJSON("data/Curr_County/Middlesex County.json", function(data) {
	        currMiddlesexData = data
	    })
	$.getJSON("data/Curr_County/Monmouth County.json", function(data) {
	        currMonmouthData = data
	    })
	$.getJSON("data/Curr_County/Morris County.json", function(data) {
	        currMorrisData = data
	    })
	$.getJSON("data/Curr_County/Ocean County.json", function(data) {
	        currOceanData = data
	    })
	$.getJSON("data/Curr_County/Passaic County.json", function(data) {
	        currPassaicData = data
	    })
	$.getJSON("data/Curr_County/Salem County.json", function(data) {
	        currSalemData = data
	    })
	$.getJSON("data/Curr_County/Somerset County.json", function(data) {
	        currSomersetData = data
	    })
	$.getJSON("data/Curr_County/Sussex County.json", function(data) {
	        currSussexData = data
	    })
	$.getJSON("data/Curr_County/Union County.json", function(data) {
	        currUnionData = data
	    })
	$.getJSON("data/Curr_County/Warren County.json", function(data) {
	        currWarrenData = data
	    })
			    
		
		
	$.getJSON("data/old_County/Atlantic County.json", function(data) {
	        oldAtlanticData = data
	    })
	$.getJSON("data/old_County/Bergen County.json", function(data) {
	        oldBergenData = data
	    })
	$.getJSON("data/old_County/Burlington County.json", function(data) {
	        oldBurlingtonData = data
	    })
	$.getJSON("data/old_County/Camden County.json", function(data) {
	        oldCamdenData = data
	    })
	$.getJSON("data/old_County/Cape May County.json", function(data) {
	        oldCapeMayData = data
	    })
	$.getJSON("data/old_County/Cumberland County.json", function(data) {
	        oldCumberlandData = data
	    })
	$.getJSON("data/old_County/Essex County.json", function(data) {
	        oldEssexData = data
	    })
	$.getJSON("data/old_County/Gloucester County.json", function(data) {
	        oldGloucesterData = data
	    })
	$.getJSON("data/old_County/Hudson County.json", function(data) {
	        oldHudsonData = data
	    })
	$.getJSON("data/old_County/Hunterdon County.json", function(data) {
	        oldHunterdonData = data
	    })
	$.getJSON("data/old_County/Mercer County.json", function(data) {
	        oldMercerData = data
	    })
	$.getJSON("data/old_County/Middlesex County.json", function(data) {
	        oldMiddlesexData = data
	    })
	$.getJSON("data/old_County/Monmouth County.json", function(data) {
	        oldMonmouthData = data
	    })
	$.getJSON("data/old_County/Morris County.json", function(data) {
	        oldMorrisData = data
	    })
	$.getJSON("data/old_County/Ocean County.json", function(data) {
	        oldOceanData = data
	    })
	$.getJSON("data/old_County/Passaic County.json", function(data) {
	        oldPassaicData = data
	    })
	$.getJSON("data/old_County/Salem County.json", function(data) {
	        oldSalemData = data
	    })
	$.getJSON("data/old_County/Somerset County.json", function(data) {
	        oldSomersetData = data
	    })
	$.getJSON("data/old_County/Sussex County.json", function(data) {
	        oldSussexData = data
	    })
	$.getJSON("data/old_County/Union County.json", function(data) {
	        oldUnionData = data
	    })
	$.getJSON("data/old_County/Warren County.json", function(data) {
	        oldWarrenData = data
	    })
		
	    function handleIt(zip) {
	
	        const Http = new XMLHttpRequest();
	        var replaced_zip = zip.split(' ').join('+');
	        var url='https://maps.googleapis.com/maps/api/geocode/json?address=' + replaced_zip + '&key=AIzaSyB-OrotjsC4Vwn-WVfJD7JeeVbMS1eyKOE';
	        Http.open("GET", url);
	        Http.send();
		console.log(url)
	        //Http.onreadystatechange = (e) => {
	            Http.onreadystatechange = function(){ 
			  if (this.readyState == 4 && this.status == 200) {
		    var data = JSON.parse(this.responseText)
		    }
	
	            if(data.results[0] === undefined) {
	
	                $("#errorMessage").text("Please Enter a Valid Address in New Jersey");
	            }
	
	            else {
	                var lat = parseFloat(data.results[0].geometry.location.lat)
	                var lon = parseFloat(data.results[0].geometry.location.lng)
			var address_components = data.results[0].address_components
			for(var i = 0; i < address_components.length; i ++) {
		             var Countystr1 = address_components[i].long_name
			     if(Countystr1.match(/County/)=='County'){
				var County = Countystr1
				}
			}
			/*var Countystr3 =data.results[0].address_components[3].long_name;
			var Countystr4 =data.results[0].address_components[4].long_name;
			if(Countystr3.match(/County/)=='County'){
				var County = Countystr3
			}
			if(Countystr4.match(/County/)=='County'){
				var County = Countystr4
			}*/
		    
			console.log(County)
			
			
			    
	                var townName;
	                var data_from_2000;
	                var data_from_2010;
	                //var address_components = data.results[0].address_components
	                for(var i = 0; i < address_components.length; i ++) {
	                    var townName_temp = address_components[i].long_name
	                    if(data_2000[townName_temp] !== undefined) {
	                        townName = townName_temp
	                        data_from_2000 = data_2000[townName]
	                        data_from_2010 = data_2010[townName]
	                    }
			    //townName = townName_temp
	                }

			
			    
			console.log(townName)
			if(County == "Atlantic County"){
	                countyDataCurr = (currAtlanticData[townName])
			countyDataOld = (oldAtlanticData[townName])
		    	}    
			if(County == "Bergen County"){
	                countyDataCurr = (currBergenData[townName])
			countyDataOld = (oldBergenData[townName])
		    	}
			if(County == "Burlington County"){
	                countyDataCurr = (currBurlingtonData[townName])
			countyDataOld = (oldBurlingtonData[townName])
		    	}
			if(County == "Camden County"){
	                countyDataCurr = (currCamdenData[townName])
			countyDataOld = (oldCamdenData[townName])
		    	}
			if(County == "Cape May County"){
	                countyDataCurr = (currCapeMayData[townName])
			countyDataOld = (oldCapeMayData[townName])	
		    	}
			if(County == "Cumberland County"){
	                countyDataCurr = (currCumberlandData[townName])
			countyDataOld = (oldCumberlandData[townName])
		    	}
			if(County == "Essex County"){
	                countyDataCurr = (currEssexData[townName])
			countyDataOld = (oldEssexData[townName])
		    	}
			if(County == "Gloucester County"){
	                //countyDataCurr = (currHudsonData['JerseyCity'])
			countyDataCurr = (currGloucesterData[townName])
			countyDataOld = (oldGloucesterData[townName])
		    	}
			if(County == "Hudson County"){
	                countyDataCurr = (currHudsonData[townName])
			countyDataOld = (oldHudsonData[townName])
		    	}
			if(County == "Hunterdon County"){
	                countyDataCurr = (currHunterdonData[townName])
			countyDataOld = (oldHunterdonData[townName])
		    	}
			if(County == "Mercer County"){
	                countyDataCurr = (currMercerData[townName])
			countyDataOld = (oldMercerData[townName])
		    	}
			if(County == "Middlesex County"){
	                countyDataCurr = (currMiddlesexData[townName])
			countyDataOld = (oldMiddlesexData[townName])
		    	}
			if(County == "Monmouth County"){
	                countyDataCurr = (currMonmouthData[townName])
			countyDataOld = (oldMonmouthData[townName])
		    	}
			if(County == "Morris County"){
	                countyDataCurr = (currMorrisData[townName])
			countyDataOld = (oldMorrisData[townName])
		    	}
			if(County == "Ocean County"){
	                countyDataCurr = (currOceanData[townName])
			countyDataOld = (oldOceanData[townName])
		    	}
			if(County == "Passaic County"){
	                countyDataCurr = (currPassaicData[townName])
			countyDataOld = (oldPassaicData[townName])
		    	}
			if(County == "Salem County"){
	                countyDataCurr = (currSalemData[townName])
			countyDataOld = (oldSalemData[townName])
		    	}
			if(County == "Somerset County"){
	                countyDataCurr = (currSomersetData[townName])
			countyDataOld = (oldSomersetData[townName])
		    	}
			if(County == "Sussex County"){
	                countyDataCurr = (currSussexData[townName])
			countyDataOld = (oldSussexData[townName])
		    	}
			if(County == "Union County"){
	                countyDataCurr = (currUnionData[townName])
			countyDataOld = (oldUnionData[townName])
		    	}
			if(County == "Warren County"){
	                countyDataCurr = (currWarrenData[townName])
			countyDataOld = (oldWarrenData[townName])
		    	}
			
			    console.log(countyDataCurr)
			    console.log(countyDataOld)
			    
	                map_origin = [lon, lat]
	
	                map_prev.flyTo({
	                    center: map_origin,
	                    zoom: map_scale
	                });
	
	                map_curr.flyTo({
	                    center: map_origin,
	                    zoom: map_scale
	                });
	
	                var relatedFeatures = map_prev.querySourceFeatures('route', {
	                    sourceLayer: 'route-layer',
	                    filter: ["==", 'type', 'Feature']
	                });
	
	                var point = turf.point([lon, lat]);
	                var old_index = 0;
	                for(var i = 1; i <= old_n; i++) {
	                    if(polygons_old[i] != 0) {
	                        for(var k = 0; k < polygons_old[i].length; k++) {
	                            var test = turf.inside(point, polygons_old[i][k]);
	                            if(test)
	                                old_index = i
	                        }
	                    }
	                }
			    //console.log(polygons_new)
	                var new_index = 0;
	                for(var i = 1; i <= new_n; i++) {
	                    if(polygons_new[i] != 0) {
	                        for(var l = 0; l < polygons_new[i].length; l++) {
	                            var test = turf.inside(point, polygons_new[i][l]);
	                            if(test)
	                                new_index = i
	                        }
	                    }
	                }

			    
			 if(County == "Morris County" && new_index==0){
			 	new_index=25;
			 }
			    
			////////////////////////////////////////////////
			    //var point2 = [lon, lat]
			    console.log(new_index)
			    var features_json = []; 
			    features_json = municipality_file.features; 
			    var jproperties = municipality_file.features.map(function (el) { return el.properties; });
			    
			    County= County.replace(' County','').toUpperCase();
			    console.log(County)
			    //console.log(jproperties[0]["COUNTY"])
			    //console.log(point)
			    //console.log(municipality_file["features"][0]["geometry"]["coordinates"][0])
			    //console.log(TRY_polygons_new)
			    
			 for(var nx=0; nx < 565 ; nx++){
		  	 	if(jproperties[nx]["COUNTY"] == County){
					console.log("found county")
					/*if (point == municipality_file["features"][nx]["geometry"]["coordinates"][0]){
						console.log("found coor!")
						//console.log(jproperties[nx]["MUN"])
					}*/
					/*for(var lxx = 0; lxx < TRY_polygons_new[nx].length; lxx++) {
						//console.log(TRY_polygons_new[nx][lxx])
					if(turf.inside(point, TRY_polygons_new[nx][lxx])){
					   console.log("found coor!")*/
		    var coordinatesNewx = municipality_file["features"][nx]["geometry"]["coordinates"]
	            var polygons_groupx = []
	            
	            if(coordinatesNewx.length == 1) {
	                polygons_groupx.push( turf.MultiPolygon( coordinatesNewx, { name: 'poly1'} ))
	                
	            }
	            else {
	                for(var lxxx = 0; lxxx < coordinatesNewx.length; lxxx++) {
	                    polygons_groupx.push( turf.MultiPolygon( coordinatesNewx[lxxx], { name: 'poly1'} ) )
	                }
	              for(var tx=0; tx < polygons_groupx.length; tx++){
				    if(turf.inside(point, polygons_groupx[tx])){
					   console.log("found coor!")
					    //console.log(jproperties[nx]["MUN"])
					    townName=jproperties[nx]["MUN_LABEL"];
	  
	            }
					
	
					/*for(var tx=0; tx < polygons_groupx.length; tx++){
				    if(turf.inside(point, polygons_groupx[tx])){
					   console.log("found coor!")
					    //console.log(jproperties[nx]["MUN"])
					    townName=jproperties[nx]["MUN_LABEL"];*/
			}
			    }
					
					
				}
			 }
			
			    
			    

			    //console.log(jproperties[564]["MUN"])
			    console.log(townName)
			    //console.log(municipality_file["features"][0]["geometry"]["coordinates"][0])
			    //console.log("hi")
			    /*for(var tx=0; tx < polygons_groupx.length; tx++){
				    if(turf.inside(point, polygons_groupx[tx])){
					   console.log("found coor!")
			}
			    }*/
			    //console.log(polygons_groupx)
			    function titleCase(str) {
			     return str.replace(/\w\S*/g, function(txt){
			       return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();
			     });
			}
			    console.log(titleCase(townName))
			    //townName=(titleCase(townName))
			///////////////////////////////////////////////
	
	                if(currentHighlight_old > 0)
	                    map_prev.setPaintProperty('route-fills-' + currentHighlight_old.toString(), 'fill-opacity', 0.15);
	                if(currentHighlight_new > 0)
	                    map_curr.setPaintProperty('route-fills-' + currentHighlight_new.toString(), 'fill-opacity', 0.15);
	                currentHighlight_old = old_index
	                currentHighlight_new = new_index
			var file_name = "District " + currentHighlight_new.toString()
			var file_name_old = "District " + currentHighlight_old.toString()
			 //console.log(currentHighlight_new)
			 console.log(file_name)
			 console.log(file_name_old)
			  

			// console.log(old_district_data[file_name]['Name'])
			 var make_old_array = (old_district_data[file_name_old]['Name']).split(",")
			 var make_array = (new_district_data[file_name]['Name']).split(",")
			 //console.log(make_old_array)
			 console.log(Current_Legislators[currentHighlight_new.toString()])
			 console.log(make_array)

			    
			var list_towns = []
			var uniqueNames = [];
			var final_old_array = [];
			var district_african_old = [];
			var district_asian_old = [];
			var district_hispanic_old = [];
			var district_white_old = [];
			var district_ai_old = [];
			var district_haw_old = [];
			var district_other_old = [];
			var old_african_num;
			var old_asian_num;
			var old_hispanic_num;
			var district_dem_num = [];
			var district_rep_num = [];
			var district_old_people = [];
			var district_old_voters = [];
			var final_old_array_show = [];
			var final_new_array_show = [];
			    
			var looking_names = JSON.stringify(data_2000);
			    
			    
			//$.getJSON("data/NJ_Legislative_Old/District_" + currentHighlight_old.toString() + ".geojson", function(json_coor){
			//for(var i=0; i<json_coor["features"][0]["geometry"]["coordinates"][0].length; i++){
			//var lons = json_coor["features"][0]["geometry"]["coordinates"][0][i][0]
			//var lats = json_coor["features"][0]["geometry"]["coordinates"][0][i][1]
			//var urls='https://maps.googleapis.com/maps/api/geocode/json?address=' + lats + ',' + lons + '&key=AIzaSyB-OrotjsC4Vwn-WVfJD7JeeVbMS1eyKOE';
			//const Http = new XMLHttpRequest();
				
				
	        	//Http.onreadystatechange = function() {
			 // if (this.readyState == 4 && this.status == 200) {
			  //   var data_need = JSON.parse(this.responseText);
			  //   var address_name =data_need.results[0].formatted_address.split(",")[1] 
			//	var correct_address_name = address_name.slice(1,address_name.length)
			//     var other_townName_temp = correct_address_name
			
			 //    list_towns.push(other_townName_temp);
			 //    $.each(list_towns, function(i, el){
			 //   if($.inArray(el, uniqueNames) === -1) uniqueNames.push(el);
			//	});
						
			//  }
				
			//}
			//Http.open("GET", urls) 
	      		//Http.send()


				
			//   		 }

				
			//	});
				 
			       	 		       
			       
	  		 Array.prototype.remove = function() {
			    var what, a = arguments, L = a.length, ax;
			    while (L && this.length) {
				what = a[--L];
				while ((ax = this.indexOf(what)) !== -1) {
				    this.splice(ax, 1);
				}
			    }
			    return this;
			};
 				
			      
			var district_people_estimate_current = [];      
			var list_towns_current = []
			var uniqueNames_current = [];
			var final_array_current = [];
			var district_african_current = [];
			var district_asian_current = [];
			var district_hispanic_current = [];
			var district_white_current = [];
			var district_ai_current = [];
			var district_haw_current = [];
			var district_other_current = [];
			var african_num_current;
			var asian_num_current;
			var hispanic_num_current;
			var district_dem_num_current = [];
			var district_rep_num_current = [];
			var district_people_current = [];
			var district_voters_current = [];
			var final_array_show_current = [];
			//var looking_names = JSON.stringify(data_2010);
			//var looking_names_old = JSON.stringify(data_2000);
			    
			var looking_names = JSON.stringify(new_district_data[file_name]['Name']);
			var looking_names_old = JSON.stringify(old_district_data[file_name_old]['Name']);
			//$.getJSON("data/NJ_Legislative/District_" + currentHighlight_new.toString() + ".geojson", function(json_coor_current){
			//	for(var i=0; i<json_coor_current["features"][0]["geometry"]["coordinates"][0].length; i++){
			//var lons_current = json_coor_current["features"][0]["geometry"]["coordinates"][0][i][0]
			//var lats_current = json_coor_current["features"][0]["geometry"]["coordinates"][0][i][1]
			//console.log(lats_current)
			//var urls_current='https://maps.googleapis.com/maps/api/geocode/json?address=' + lats_current + ',' + lons_current + '&key=AIzaSyB-OrotjsC4Vwn-WVfJD7JeeVbMS1eyKOE';
			//console.log(urls_current)
			//const Http_current = new XMLHttpRequest();
		
				
	        	//Http_current.onreadystatechange = function() {
			//  if (this.readyState == 4 && this.status == 200) {
			//     var data_need_current = JSON.parse(this.responseText);
			 //    var address_name_current =data_need_current.results[0].formatted_address.split(",")[1] 
			//	var correct_address_name_current = address_name_current.slice(1,address_name_current.length)
			//     var other_townName_current = correct_address_name_current
			
			//     list_towns_current.push(other_townName_current);
			  //  $.each(list_towns_current, function(i, el){
			  // if($.inArray(el, uniqueNames_current) === -1) uniqueNames_current.push(el);
			//	});
						
			//  }
				
			//}
			//Http_current.open("GET", urls_current) 
	      		//Http_current.send()
				
			   		 }
				    //console.log(list_towns_current)
			//	});
			    
			    var array_removed = []
			    var array_added = []
			    var array_final_added = []
			    var final_new_array = []
			    var rep_ratio_current = []
			    var dem_ratio_current = []
			    var african_ratio_current =[]
			    var asian_ratio_current = []
			    var hispanic_ratio_current = []
			    var white_ratio_current = []
			    var ai_ratio_current = []
			    var haw_ratio_current = []
			    var other_ratio_current = []
			    var rep_ratio_old = []
			    var dem_ratio_old = []
			    var african_ratio_old =[]
			    var asian_ratio_old = []
			    var hispanic_ratio_old = []
			    var white_ratio_old = []
			    var ai_ratio_old = []
			    var haw_ratio_old = []
			    var other_ratio_old = []
			    var target_pop_old = 212000;
			    //var target_pop_curr = 220700;
			    var target_pop_curr = 219797;
			    
			    //var show_array = []
			    
			    make_old_array.forEach(function(a, ind){
				if(looking_names_old.includes(make_old_array[ind])){
				final_old_array.push(make_old_array[ind])
			       }
			      });
			    
			  
			    
	                    make_old_array.forEach(function(a, ind){
				if(looking_names_old.includes(make_old_array[ind])){
				final_old_array_show.push(make_old_array[ind])
			       }
			    });
			    
			    //final_old_array_show = final_old_array_show.filter(e => e !== townName)
			    final_old_array_show = make_old_array.filter(e => e !== townName)
			    var show_array= final_old_array_show.join(', ')
			    final_new_array_show = make_array.filter(e => e !== townName)
			    var show_new_array = final_new_array_show.join(', ')
					     console.log(final_old_array)
			        
			        
			    	/*district_old_files[file_name_old].foreach(function(a,ind){
			    	district_african_old.push(Number(district_old_files[file_name_old][ind]['af']))
				district_asian_old.push(Number(district_old_files[file_name_old][ind]['a']))
				district_hispanic_old.push(Number(district_old_files[file_name_old][ind]['his']))
				district_ai_old.push(Number(district_old_files[file_name_old][ind]['ai']))
				district_white_old.push(Number(district_old_files[file_name_old][ind]['white']))
				district_haw_old.push(Number(district_old_files[file_name_old][ind]['haw']))
				district_other_old.push(Number(district_old_files[file_name_old][ind]['other']))
			        //district_dem_num.push(Number(data_2000[a]['democratic']))
				//district_rep_num.push(Number(data_2000[a]['republican']))
				district_old_people.push(Number(parseFloat((district_old_files[file_name_old][ind]['population']).replace(/,/g, ''))))
				district_old_voters.push(Number(parseFloat((district_old_files[file_name_old][ind]['voters']).replace(/,/g, ''))))
				});*/
			        
			    	
			    	//console.log(district_old_files[file_name]['']) 
				
				//final_old_array.forEach(function(a,ind){
			    	make_old_array.forEach(function(a,ind){
				console.log(a)
			        district_african_old.push(Number(district_old_files[file_name_old][a]['af']))
				district_asian_old.push(Number(district_old_files[file_name_old][a]['a']))
				district_hispanic_old.push(Number(district_old_files[file_name_old][a]['his']))
				district_ai_old.push(Number(district_old_files[file_name_old][a]['ai']))
				district_white_old.push(Number(district_old_files[file_name_old][a]['white']))
				district_haw_old.push(Number(district_old_files[file_name_old][a]['haw']))
				district_other_old.push(Number(district_old_files[file_name_old][a]['other']))
			        //district_dem_num.push(Number(data_2000[a]['democratic']))
				//district_rep_num.push(Number(data_2000[a]['republican']))
				district_old_people.push(Number(parseFloat((district_old_files[file_name_old][a]['population']).replace(/,/g, ''))))
				district_old_voters.push(Number(parseFloat((district_old_files[file_name_old][a]['voters']).replace(/,/g, ''))))
				});
			        
			    	
				/*district_african_old.push(Number(racedata2000[a]['af']))
				district_asian_old.push(Number(racedata2000[a]['a']))
				district_hispanic_old.push(Number(racedata2000[a]['his']))
				district_ai_old.push(Number(racedata2000[a]['ai']))
				district_white_old.push(Number(racedata2000[a]['white']))
				district_haw_old.push(Number(racedata2000[a]['haw']))
				district_other_old.push(Number(racedata2000[a]['other']))
			        //district_dem_num.push(Number(data_2000[a]['democratic']))
				//district_rep_num.push(Number(data_2000[a]['republican']))
				district_old_people.push(Number(parseFloat((data_2000[a]['population']).replace(/,/g, ''))))
				district_old_voters.push(Number(parseFloat((data_2000[a]['voters']).replace(/,/g, ''))))
				});*/
			    
			         
			    	    for(var i=0; i<district_old_people.length; i++){
				    //rep_ratio_old.push(district_old_people[i]*(district_rep_num[i]/100))
				    //dem_ratio_old.push(district_old_people[i]*(district_dem_num[i]/100))
			            white_ratio_old.push(district_old_people[i]*(district_white_old[i]/100))
				    african_ratio_old.push(district_old_people[i]*(district_african_old[i]/100))
			            ai_ratio_old.push(district_old_people[i]*(district_ai_old[i]/100))
				    asian_ratio_old.push(district_old_people[i]*(district_asian_old[i]/100))
				    haw_ratio_old.push(district_old_people[i]*(district_haw_old[i]/100))
			            other_ratio_old.push(district_old_people[i]*(district_other_old[i]/100))
				    hispanic_ratio_old.push(district_old_people[i]*(district_hispanic_old[i]/100))
			   	    }
			    
			    	/*var Town_pop = countyDataOld['population'];
			    		
			    	if(file_name_old == "District 27") {
					var Town_pop = 11992;
					
				}
			    	if(file_name_old == "District 28") {
					var Town_pop = 49495;
				}
			    	if(file_name_old == "District 29") {
					var Town_pop = 169143;
					
				}
			    	if(file_name_old == "District 31") {
					var Town_pop = 129074;
				}
			    	if(file_name_old == "District 32") {
					var Town_pop = 72669;
				}
			    	if(file_name_old == "District 33") {
					var Town_pop = 45989;
				}
			    
			    	var Town_pop_curr = countyDataCurr['population']
				
				if(file_name_old == "District 28") {
					var Town_pop_curr = 88249;
					
				}
			    	if(file_name_old == "District 29") {
					var Town_pop_curr = 188891;
				}
			    	if(file_name_old == "District 31") {
					var Town_pop_curr = 157610;
					
				}
			    	if(file_name_old == "District 33") {
					var Town_pop_curr = 89987;
				}*/
			    
			    make_array.forEach(function(a, ind){
				if(looking_names.includes(make_array[ind])){
				final_new_array.push(make_array[ind])
			       }
			      });
			    
			      
			      //final_new_array.forEach(function(t,ind){
			       		make_array.forEach(function(t,ind){
					//alert(racedata2010[t]);
				        console.log(t);
				        district_african_current.push(Number(district_new_files[file_name][t]['af']))			      
					district_asian_current.push(Number(district_new_files[file_name][t]['a']))
					district_hispanic_current.push(Number(district_new_files[file_name][t]['his']))
				        district_white_current.push(Number(district_new_files[file_name][t]['white']))
				        district_ai_current.push(Number(district_new_files[file_name][t]['ai']))
				        district_haw_current.push(Number(district_new_files[file_name][t]['haw']))
				        district_other_current.push(Number(district_new_files[file_name][t]['other']))
					//district_dem_num_current.push(Number(data_2010[a]['democratic']))
					//district_rep_num_current.push(Number(data_2010[a]['republican']))
				        district_people_estimate_current.push(Number(parseFloat((district_new_files[file_name][t]['pop_est']).replace(/,/g, ''))))
					district_people_current.push(Number(parseFloat((district_new_files[file_name][t]['population']).replace(/,/g, ''))))
					district_voters_current.push(Number(parseFloat((district_new_files[file_name][t]['voters']).replace(/,/g, ''))))
					});
			                /*district_african_current.push(Number(racedata2010[t]['af']))			      
					district_asian_current.push(Number(racedata2010[t]['a']))
					district_hispanic_current.push(Number(racedata2010[t]['his']))
				        district_white_current.push(Number(racedata2010[t]['white']))
				        district_ai_current.push(Number(racedata2010[t]['ai']))
				        district_haw_current.push(Number(racedata2010[t]['haw']))
				        district_other_current.push(Number(racedata2010[t]['other']))
					//district_dem_num_current.push(Number(data_2010[a]['democratic']))
					//district_rep_num_current.push(Number(data_2010[a]['republican']))
					district_people_current.push(Number(parseFloat((data_2010[t]['population']).replace(/,/g, ''))))
					district_voters_current.push(Number(parseFloat((data_2010[t]['voters']).replace(/,/g, ''))))
					});*/
				
			    
			    for(var i=0; i<district_people_current.length; i++){
				    //rep_ratio_current.push(district_people_current[i]*(district_rep_num_current[i]/100))
				    //dem_ratio_current.push(district_people_current[i]*(district_dem_num_current[i]/100))
				    white_ratio_current.push(district_people_current[i]*(district_white_current[i]/100))
				    african_ratio_current.push(district_people_current[i]*(district_african_current[i]/100))
				    ai_ratio_current.push(district_people_current[i]*(district_ai_current[i]/100))
				    asian_ratio_current.push(district_people_current[i]*(district_asian_current[i]/100))
				    haw_ratio_current.push(district_people_current[i]*(district_haw_current[i]/100))
				    other_ratio_current.push(district_people_current[i]*(district_other_current[i]/100))
				    hispanic_ratio_current.push(district_people_current[i]*(district_hispanic_current[i]/100))
			    }
			    
			    
			    
			 
			    
	                if(data_from_2000 == undefined) {
	                    $('#city_prev').html("<i>Your Town:</i> <b style='font-size: 22px'>" + townName + "</b>")
	                    $('#voters_prev').text("Registered Voters: N/A")
	                    $('#democratic_prev').text("N/A %")
	                    $('#republican_prev').text("N/A %")
	                    $('#population_prev').text("N/A People")
	                    $('#african_prev').text("N/A %")
	                    $('#asian_prev').text("N/A %")
	                    $('#hispanic_prev').text("N/A %")
	                    $('#taxable_prev').text("Per Capital Taxable Property Value: N/A")
	                }
	
	                else {
	                    $('#city_prev').html("<i>Your Town:</i> <b style='font-size:22px'>" + townName + "</b>")
			    // setTimeout(function(){
			         //console.log(uniqueNames)
			         
				
				var dev = (district_old_people.reduce((a, b) => a + b, 0)) - target_pop_old 
				
				if ( dev > 0) { dev = "+"+dev }
				//var dev_curr = target_pop_curr - (district_people_current.reduce((a, b) => a + b, 0))
				var dev_curr = (district_people_current.reduce((a, b) => a + b, 0)) - target_pop_curr
				if ( dev_curr > 0) { dev_curr = "+"+dev_curr }
				//console.log(target_pop_old)
				console.log(dev)
			      $('#other_city_curr').html("<u><b>Other Towns in Your District</b></u><br><br>" + show_new_array)
			      $('#other_city_prev').html("<u><b>Other Towns in Your District</b></u><br><br><br><br>" + show_array)
			      $('#white_num').text((((white_ratio_old.reduce((a, b) => a + b, 0)/ district_old_people.reduce((a, b) => a + b, 0)))*100).toFixed(2) + "%")
			      $('#african_num').text((((african_ratio_old.reduce((a, b) => a + b, 0)/ district_old_people.reduce((a, b) => a + b, 0)))*100).toFixed(2) + "%")
			      $('#ai_num').text((((ai_ratio_old.reduce((a, b) => a + b, 0)/ district_old_people.reduce((a, b) => a + b, 0)))*100).toFixed(2) + "%")
			      $('#asian_num').html((((asian_ratio_old.reduce((a, b) => a + b, 0)/ district_old_people.reduce((a, b) => a + b, 0)))*100).toFixed(2) + "%")
			      $('#haw_num').text((((haw_ratio_old.reduce((a, b) => a + b, 0)/ district_old_people.reduce((a, b) => a + b, 0)))*100).toFixed(2) + "%")
			      $('#other_num').text((((other_ratio_old.reduce((a, b) => a + b, 0)/ district_old_people.reduce((a, b) => a + b, 0)))*100).toFixed(2) + "%")
			      $('#hispanic_num').text((((hispanic_ratio_old.reduce((a, b) => a + b, 0)/ district_old_people.reduce((a, b) => a + b, 0)))*100).toFixed(2) + "%")
			      //$('#democratic_num').text((((dem_ratio_old.reduce((a, b) => a + b, 0)/ district_old_people.reduce((a, b) => a + b, 0)))*100).toFixed(2) + "%")
			      //$('#republican_num').text((((rep_ratio_old.reduce((a, b) => a + b, 0)/ district_old_people.reduce((a, b) => a + b, 0)))*100).toFixed(2) + "%")
			      $('#population_prev_num').html("Total Population: " +(district_old_people.reduce((a, b) => a + b, 0)).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ","))
			      $('#voters_prev_num').text("Registered Voters: " + (district_old_voters.reduce((a, b) => a + b, 0)).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ","))
			      //}, 10000);
		            	
				
			    $('#white_prev').text(countyDataOld['white'] + "%")
	                    $('#voters_prev').text("Registered Voters: " + countyDataOld['voters'].toString().replace(/\B(?=(\d{3})+(?!\d))/g, ","))
	                    //$('#democratic_prev').text(data_from_2000['democratic'] + "%")
	                    //$('#republican_prev').text(data_from_2000['republican'] + "%")
	                    $('#population_prev').text("Population: " + countyDataOld['population'].toString().replace(/\B(?=(\d{3})+(?!\d))/g, ","))
	                    $('#african_prev').text(countyDataOld['af'] + "%")
	                    $('#asian_prev').text(countyDataOld['a'] + "%")
			    $('#ai_prev').text(countyDataOld['ai'] + "%")
			    $('#haw_prev').text(countyDataOld['haw'] + "%")
			    $('#other_prev').text(countyDataOld['other'] + "%")
	                    $('#hispanic_prev').text(countyDataOld['his'] + "%")
	                    $('#taxable_prev').text("Per Capital Taxable Property Value: $" + data_from_2000['taxable'])
	                }
			    
			    console.log(asian_ratio_old.reduce((a, b) => a + b, 0))
				console.log(district_old_people.reduce((a, b) => a + b, 0))
				console.log((asian_ratio_old.reduce((a, b) => a + b, 0))/(district_old_people.reduce((a, b) => a + b, 0)))
			    console.log((((asian_ratio_old.reduce((a, b) => a + b, 0)/ district_old_people.reduce((a, b) => a + b, 0)))*100).toFixed(2) + "%")
				//console.log((((asian_ratio_current.reduce((a, b) => a + b, 0)/ district_old_people.reduce((a, b) => a + b, 0)))*100).toFixed(2) + "%")
	
	                if(data_from_2010 == undefined) {
	                    $('#city_curr').html("<i>Your Town:</i> <b style='font-size: 22px'>" + townName + "</b>")
	                    $('#voters_curr').text("N/A Registered Voters")
	                    $('#democratic_curr').text("N/A %")
	                    $('#republican_curr').text("N/A %")
	                    $('#population_curr').text("Town Demographics: N/A Total Population")
	                    $('#african_curr').text("N/A %")
	                    $('#asian_curr').text("N/A %")
	                    $('#hispanic_curr').text("N/A %")
	                    $('#taxable_curr').text("Per Capital Taxable Property Value: N/A")
			    $('#deviation_curr_num').text("Deviation: N/A")	
			    $('#white_curr_num').text("N/A %")
	                }
			    
			    
	
	                else {
	                    $('#city_curr').html("<i>Your Town:</i> <b style='font-size: 22px'>" + townName + "</b>")
			    //setTimeout(function(){
				  
				    
				    
				    
				    for(var i=0; i<make_array.length; i++){
				if(final_old_array.includes(make_array[i])){
					//array_removed.push(final_old_array[i])
					continue;
				}
				  else {
					  array_added.push(make_array[i])
					  //array_added.push(", ")
				  }
			    }
				    
				 
				 for(var i=0; i<final_old_array.length; i++){
					if(make_array.includes(final_old_array[i])){
						//array_final_added.push(make_array[i])
						continue;
					}
					 else{
						 array_removed.push(final_old_array[i])
						 //array_removed.push(show_new_array[i])
						 
					 }
				 }
				//console.log(array_final_added)
				//console.log(array_removed)
			    	//console.log(array_added)
				    
				    console.log(make_array)
				console.log(final_old_array)
				console.log(array_removed)
				
				
				
				
				  
			      $('#estimate_pop_curr').html("Estimated Population (2018): " + countyDataCurr['pop_est'].toString().replace(/\B(?=(\d{3})+(?!\d))/g, ","))
			      $('#african_curr_num').text((((african_ratio_current.reduce((a, b) => a + b, 0)/ district_people_current.reduce((a, b) => a + b, 0)))*100).toFixed(2) + "%")
			      $('#asian_curr_num').text((((asian_ratio_current.reduce((a, b) => a + b, 0)/ district_people_current.reduce((a, b) => a + b, 0)))*100).toFixed(2) + "%")
			      $('#hispanic_curr_num').text((((hispanic_ratio_current.reduce((a, b) => a + b, 0)/ district_people_current.reduce((a, b) => a + b, 0)))*100).toFixed(2) + "%")
			      $('#ai_curr_num').text((((ai_ratio_current.reduce((a, b) => a + b, 0)/ district_people_current.reduce((a, b) => a + b, 0)))*100).toFixed(2) + "%")
			      $('#other_curr_num').text((((other_ratio_current.reduce((a, b) => a + b, 0)/ district_people_current.reduce((a, b) => a + b, 0)))*100).toFixed(2) + "%")
			      $('#haw_curr_num').text((((haw_ratio_current.reduce((a, b) => a + b, 0)/ district_people_current.reduce((a, b) => a + b, 0)))*100).toFixed(2) + "%")
			      $('#white_curr_num').text((((white_ratio_current.reduce((a, b) => a + b, 0)/ district_people_current.reduce((a, b) => a + b, 0)))*100).toFixed(2) + "%")
			      $('#old_target').text("District Target Population: 212,000")
			      $('#new_target').text("District Target Population: 219,797")
			      //$('#white_curr_num').text(new_district_data[file_name]['white'] + "%")
			      //$('#african_curr_num').text(new_district_data[file_name]['african'] + "%")
			      //$('#asian_curr_num').text(new_district_data[file_name]['asian'] + "%")
			      //$('#hispanic_curr_num').text(new_district_data[file_name]['hispanic'] + "%")
			      //$('#democratic_curr_num').text((((dem_ratio_current.reduce((a, b) => a + b, 0)/ district_people_current.reduce((a, b) => a + b, 0)))*100).toFixed(2) + "%")
			      //$('#republican_curr_num').text((((rep_ratio_current.reduce((a, b) => a + b, 0)/ district_people_current.reduce((a, b) => a + b, 0)))*100).toFixed(2) + "%")
			      $('#population_curr_num').html("Total Population: " + (district_people_current.reduce((a, b) => a + b, 0)).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ","))
			      $('#district_estimate_pop_curr').html("Estimated Total Population (2018): " + (district_people_estimate_current.reduce((a, b) => a + b, 0)).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ","))
			      //$('#population_curr_num').html("District Demographics: " + District_Population_2010[file_name]['Population'].toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",") + " Population")
			      $('#voters_curr_num').text("Registered Voters: " + (district_voters_current.reduce((a, b) => a + b, 0)).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ","))
			      $('#added').html("<br>" + (array_added).join(', '))
			      $('#removed').html("<br>" + (array_removed).join(', '))
			      $('#deviation_curr_num').text("Deviation: " + dev_curr.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ","))	
			      $('#deviation_old').text("Deviation: " + dev.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ","))
			      //}, 20000);
				  
	                    $('#voters_curr').text("Registered Voters: " + countyDataCurr['voters'].toString().replace(/\B(?=(\d{3})+(?!\d))/g, ","))
	                    //$('#democratic_curr').text(data_from_2010['democratic'] + "%")
	                    //$('#republican_curr').text(data_from_2010['republican'] + "%")
	                    $('#population_curr').text("Population: " + countyDataCurr['population'].toString().replace(/\B(?=(\d{3})+(?!\d))/g, ","))
	                    $('#african_curr').text(countyDataCurr['af'] + "%")
	                    $('#asian_curr').text(countyDataCurr['a'] + "%")
	                    $('#hispanic_curr').text(countyDataCurr['his'] + "%")
			    $('#ai_curr').text(countyDataCurr['ai'] + "%")
			    $('#white_curr').text(countyDataCurr['white'] + "%")
			    $('#haw_curr').text(countyDataCurr['haw'] + "%")
			    $('#other_curr').text(countyDataCurr['other'] + "%")
	                    //$('#taxable_curr').text("Per Capital Taxable Property Value: $" + data_from_2010['taxable'])
			    $('#current_district_number_top').html(new_index.toString())
			    $('#senator_curr').html(Current_Legislators[currentHighlight_new.toString()]['Senator'])
		            $('#member1_curr').html("&emsp;&emsp;&emsp;" + (Current_Legislators[currentHighlight_new.toString()]['Member1']))
			    $('#member2_curr').html((Current_Legislators[currentHighlight_new.toString()]['Member2']) + "&emsp;&emsp;&emsp;")
	                }
	
	                $('#previous_district_number').text("Legislative District " + old_index.toString())
	                $('#current_district_number').text("Legislative District " + new_index.toString())
			$('#previous_district_number_bottom').text("Legislative District " + old_index.toString())
	                $('#current_district_number_bottom').text("Legislative District " + new_index.toString())
	
	                map_prev.setPaintProperty('route-fills-' + old_index.toString(), 'fill-opacity', 0.5);
	                map_curr.setPaintProperty('route-fills-' + new_index.toString(), 'fill-opacity', 0.5);
	            }
	        }
		//}
	
	
	    $.getJSON("data/NJ_Legislative.geojson", function(json) {
	        LegislativeDataCurrent = json
	    });
	
	    $.getJSON("data/NJ_Legislative_Old.geojson", function(json) {
	        LegislativeDataPast = json
	    });
	
	    for(var i = 1; i <= old_n; i++) {
	        $.getJSON("data/NJ_Legislative_Old/District_" + i.toString() + ".geojson", function(json_old) {
	            var id = json_old["features"][0]["properties"]["ID"]
	            LegislativeDataPast_Districts[id] = json_old
	            var coordinates = json_old["features"][0]["geometry"]["coordinates"]
	            var polygons_group = []
	            if(coordinates.length == 1 || id == "31") {
	                polygons_group.push( turf.polygon( coordinates, { name: 'poly1'} ))
	                polygons_old[parseInt(id)] = polygons_group
	            }
	            else {
	
	                for(var k = 0; k < coordinates.length; k++) {
	                    polygons_group.push( turf.polygon( coordinates[k], { name: 'poly1'} ) )
	                }
	                polygons_old[parseInt(id)] = polygons_group
	                
	            }
	        });
	    }
	
	    
	    for(var j = 1; j <= new_n; j++) {
	        $.getJSON("data/NJ_Legislative/District_" + j.toString() + ".geojson", function(json_new) {
	            var object_id = json_new["features"][0]["properties"]["OBJECTID"]
	            LegislativeDataCurrent_Districts[object_id.toString()] = json_new
	            var coordinatesNew = json_new["features"][0]["geometry"]["coordinates"]
	            var polygons_group = []
	            
	            if(coordinatesNew.length == 1 || object_id == "34") {
	                polygons_group.push( turf.polygon( coordinatesNew, { name: 'poly1'} ))
	                polygons_new[object_id] = polygons_group
	            }
	            else {
	
	                for(var l = 0; l < coordinatesNew.length; l++) {
	                    polygons_group.push( turf.polygon( coordinatesNew[l], { name: 'poly1'} ) )
	                }
	                polygons_new[object_id] = polygons_group
	                
	            }
	        });
	    } 
	
		
	    
	    mapboxgl.accessToken = 'pk.eyJ1IjoiZnVlcnphc3RyYXRlZ3lncm91cCIsImEiOiJjanoycWJqcHkwNnA4M2pudHFmdnJ5bXZlIn0.eaNrVgK5M7eLrCmi_hGX1A';
	
	    map_origin = [-74.53734351262877, 40.137451890638886]
	    map_scale = 6.3
	
	
	    var map_prev = new mapboxgl.Map({
	        container: 'map_prev',
	        style: 'mapbox://styles/mapbox/streets-v11',
	        center: map_origin,
	        zoom: map_scale
	    });
		
	
	    map_prev.on('load', function () {
	
	        map_prev.addSource('route', {
	          type: 'geojson',
	          data: LegislativeDataPast
	        });
	
	
	        for(var i = 1; i <= old_n; i++) {
	            i_str = i.toString()
	            map_prev.addSource('route_old_' + i_str, {
	              type: 'geojson',
	              data: LegislativeDataPast_Districts[i_str]
	            });
	
	        }
	        
	
	        map_prev.addLayer({
	            "id": "route",
	            "type": "line",
	            "source": "route",
	            "sourcelayer": "route-layer",
	            "layout": {
	                "line-join": "round",
	                "line-cap": "round"
	            },
	            "paint": {
	                "line-color": "#888",
	                "line-width": 1
	            }
	        });
	
	        for(var i = 1; i <= old_n; i++) {
	            map_prev.addLayer({
	                "id": "route-fills-" + i.toString(),
	                "type": "fill",
	                "source": "route_old_" + i.toString(),
	                "layout": {},
	                "paint": {
	                    "fill-color": "#627BC1",
	                    "fill-opacity": 0.15
	                }
	            });
	
	        }
	
	
	
	
	    });
	
	
	    var map_curr = new mapboxgl.Map({
	        container: 'map_curr',
	        style: 'mapbox://styles/mapbox/streets-v11',
	        center: map_origin,
	        zoom: map_scale
	    });
	
	    map_curr.on('load', function () {
	
	        map_curr.addSource('route', {
	          type: 'geojson',
	          data: LegislativeDataCurrent
	        });
	
	        
	        for(var j = 1; j <= new_n; j++) {
	            j_str = j.toString()
	            map_curr.addSource('route_new_' + j_str, {
	              type: 'geojson',
	              data: LegislativeDataCurrent_Districts[j_str]
	            });
	
	        }
	        
	
	        map_curr.addLayer({
	            "id": "route",
	            "type": "line",
	            "source": "route",
	            "layout": {
	                "line-join": "round",
	                "line-cap": "round"
	            },
	            "paint": {
	                "line-color": "#888",
	                "line-width": 1
	            }
	        });
	
	        
	        for(var j = 1; j <= new_n; j++) {
	            map_curr.addLayer({
	                "id": "route-fills-" + j.toString(),
	                "type": "fill",
	                "source": "route_new_" + j.toString(),
	                "layout": {},
	                "paint": {
	                    "fill-color": "#627BC1",
	                    "fill-opacity": 0.15
	                }
	            });
	
	        } 
	
	    });
	
	
	
	    //------------------ Align Maps To Same Centers/Zoom -----------------//
	
	    var disable = false;
	  
	  map_prev.on('move', function () {
	        if (!disable) {
	            map_origin = map_prev.getCenter()
	            map_scale = map_prev.getZoom()
	            disable = true;
	            map_curr.setCenter(map_origin)
	            map_curr.setZoom(map_scale)
	            disable = false;
	        }
	    })
	    
	    map_prev.on('zoom', function () {
	        if (!disable) {
	            map_origin = map_prev.getCenter()
	            map_scale = map_prev.getZoom()
	            disable = true;
	            //map_curr.setCenter(map_origin)
	            //map_curr.setZoom(map_scale)
	            //disable = false;
	        }
	    })
	
	    map_curr.on('move', function () {
	        if (!disable) {
	            map_origin = map_curr.getCenter()
	            map_scale = map_curr.getZoom()
	            disable = true;
	            map_prev.setCenter(map_origin)
	            map_prev.setZoom(map_scale)
	            disable = false;
	        }
	    })
	
	    map_curr.on('zoom', function () {
	        if (!disable) {
	            map_origin = map_curr.getCenter()
	            map_scale = map_curr.getZoom()
	            disable = true;
	            //map_prev.setCenter(map_origin)
	            //map_prev.setZoom(map_scale)
	            //disable = false;
	        }
	    }) 
		
		map_prev.addControl(new mapboxgl.NavigationControl());
		map_curr.addControl(new mapboxgl.NavigationControl());	
	
	</script>

	</body>
	</html>

